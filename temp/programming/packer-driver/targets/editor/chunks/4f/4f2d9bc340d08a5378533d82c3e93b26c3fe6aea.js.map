{"version":3,"sources":["file:///D:/Cocos%20Creator/Sky-Hunter/NewProject/assets/scripts/GameCtrl.ts"],"names":["_decorator","Component","Node","Prefab","Vec3","instantiate","macro","Label","ProgressBar","Plane","ccclass","property","GameCtrl","destroyCount","highPoint","listPos","onLoad","instance","start","spawnList","spawnTurn1","bind","spawnBoss1","spawnTurn2","spawnBoss2","spawnTurn3","spawnBoss3","i","length","schedule","REPEAT_FOREVER","spawnEnabled","enemyWave1","setTimeout","console","log","j","enemyPre","prefabInstance","parent","node","name","endsWith","setWorldPosition","x","y","z","enemyWave2","enemyWave3","healthBar","active","spawnHeli","helicopPre","helicop","spawnPos","setPosition","addChild","countPoint","countPointLb","string","overPointLb","savePoint","highPointLb"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Prefab, Vec3, instantiate, macro, Label, ProgressBar, System, sys } from 'cc';\r\nimport { Plane } from './Plane';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GameCtrl')\r\nexport class GameCtrl extends Component {\r\n    static instance: GameCtrl;\r\n\r\n    @property(Prefab)\r\n    public enemyWave1: Prefab [] = [];\r\n    @property(Prefab)\r\n    public enemyWave2: Prefab [] = [];\r\n    @property(Prefab)\r\n    public enemyWave3: Prefab [] = [];\r\n    @property(Prefab)\r\n    public helicop: Prefab = null;\r\n    @property(Node)\r\n    public overNode: Node = null;\r\n    @property(Label)\r\n    public countPointLb: Label;\r\n    @property(Label)\r\n    public overPointLb: Label;\r\n    @property(Label)\r\n    public highPointLb: Label;\r\n    public destroyCount: number = 0;\r\n    public highPoint: number = 0;\r\n    listPos = [\r\n        new Vec3(640, 760), //turn 1, 3, 5, 7\r\n        new Vec3(-50, 760), //turn 2\r\n        new Vec3(-100, 560),//turn 4\r\n        new Vec3(-50, 270), //turn 6\r\n        new Vec3(1330, 560),//turn 8\r\n        new Vec3(1330, 270),//turn 9\r\n        new Vec3(1330, 760),//turn 10\r\n        new Vec3(640, 500, -1)  //turn boss\r\n    ];\r\n    @property(ProgressBar)\r\n    public healthBar: ProgressBar [] = [];\r\n    protected onLoad(): void {\r\n        GameCtrl.instance = this;\r\n    }\r\n    start() {\r\n        let spawnList = [\r\n            this.spawnTurn1.bind(this),\r\n            this.spawnBoss1.bind(this),\r\n            this.spawnTurn2.bind(this),\r\n            this.spawnBoss2.bind(this),\r\n            this.spawnTurn3.bind(this),\r\n            this.spawnBoss3.bind(this),\r\n        ];\r\n        for (let i = 0; i < spawnList.length; i++) {\r\n            // Sử dụng schedule để lập lịch cho hàm, với khoảng thời gian 0 và lặp lại vô hạn\r\n            this.schedule(spawnList[i], 0, macro.REPEAT_FOREVER, 0);\r\n        }\r\n    }\r\n    spawnTurn1(i: number){\r\n        if(!Plane.instance.spawnEnabled) return;\r\n        if (i < this.enemyWave1.length) {\r\n            setTimeout(() => {\r\n                this.spawnTurn1(i + 1);\r\n            }, 6000);\r\n            console.log('da spawn', i);\r\n            for(let j = 0; j < 5; j++){\r\n                let enemyPre = this.enemyWave1[i];\r\n                let prefabInstance = instantiate(enemyPre);\r\n                prefabInstance.parent = this.node.parent;\r\n                if(enemyPre.name.endsWith('_0')){\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x + (120 * (j - 2)), this.listPos[0].y, this.listPos[0].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_1')){\r\n                    prefabInstance.setWorldPosition(this.listPos[1].x - (100 * (0 + j)), this.listPos[1].y + (60 * (j + 1)), this.listPos[0].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_2')){\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x, this.listPos[0].y + (120 * (0 + j)), this.listPos[0].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_3')){\r\n                    prefabInstance.setWorldPosition(this.listPos[2].x + (140 * (j - 2)), this.listPos[2].y, this.listPos[2].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_4')){\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x, this.listPos[0].y + (120 * (0 + j)), this.listPos[0].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_5')){\r\n                    prefabInstance.setWorldPosition(this.listPos[3].x + (140 * (j - 2)), this.listPos[3].y, this.listPos[3].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_6')){\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x + (120 * (j - 2)), this.listPos[0].y, this.listPos[0].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_7')){\r\n                    prefabInstance.setWorldPosition(this.listPos[4].x  + (140 * (j - 2)), this.listPos[4].y, this.listPos[4].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_8')){\r\n                    prefabInstance.setWorldPosition(this.listPos[5].x + (140 * (j - 2)), this.listPos[5].y, this.listPos[5].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_9')){\r\n                    prefabInstance.setWorldPosition(this.listPos[6].x + (100 * (0 + j)), this.listPos[6].y + (60 * (j + 1)), this.listPos[6].z);\r\n                }\r\n            }\r\n        }else{return;}\r\n    }\r\n    spawnTurn2(i: number){\r\n        if(!Plane.instance.spawnEnabled) return;\r\n        if (i < this.enemyWave2.length) {\r\n            setTimeout(() => {\r\n                this.spawnTurn2(i + 1);\r\n            }, 6000);\r\n            console.log('da spawn', i);\r\n            for(let j = 0; j < 5; j++){\r\n                let enemyPre = this.enemyWave2[i];\r\n                let prefabInstance = instantiate(enemyPre);\r\n                prefabInstance.parent = this.node.parent;\r\n                if(enemyPre.name.endsWith('_0')){\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x + (120 * (j - 2)), this.listPos[0].y, this.listPos[0].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_1')){\r\n                    prefabInstance.setWorldPosition(this.listPos[1].x - (100 * (0 + j)), this.listPos[1].y + (60 * (j + 1)), this.listPos[0].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_2')){\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x, this.listPos[0].y + (120 * (0 + j)), this.listPos[0].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_3')){\r\n                    prefabInstance.setWorldPosition(this.listPos[2].x + (140 * (j - 2)), this.listPos[2].y, this.listPos[2].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_4')){\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x, this.listPos[0].y + (120 * (0 + j)), this.listPos[0].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_5')){\r\n                    prefabInstance.setWorldPosition(this.listPos[3].x + (140 * (j - 2)), this.listPos[3].y, this.listPos[3].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_6')){\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x + (120 * (j - 2)), this.listPos[0].y, this.listPos[0].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_7')){\r\n                    prefabInstance.setWorldPosition(this.listPos[4].x  + (140 * (j - 2)), this.listPos[4].y, this.listPos[4].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_8')){\r\n                    prefabInstance.setWorldPosition(this.listPos[5].x + (140 * (j - 2)), this.listPos[5].y, this.listPos[5].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_9')){\r\n                    prefabInstance.setWorldPosition(this.listPos[6].x + (100 * (0 + j)), this.listPos[6].y + (60 * (j + 1)), this.listPos[6].z);\r\n                } \r\n            }\r\n        }else{return;}\r\n    }\r\n    spawnTurn3(i: number){\r\n        if(!Plane.instance.spawnEnabled) return;\r\n        if (i < this.enemyWave3.length) {\r\n            setTimeout(() => {\r\n                this.spawnTurn3(i + 1);\r\n            }, 6000);\r\n            console.log('da spawn', i);\r\n            for(let j = 0; j < 5; j++){\r\n                let enemyPre = this.enemyWave3[i];\r\n                let prefabInstance = instantiate(enemyPre);\r\n                prefabInstance.parent = this.node.parent;\r\n                if(enemyPre.name.endsWith('_0')){\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x + (120 * (j - 2)), this.listPos[0].y, this.listPos[0].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_1')){\r\n                    prefabInstance.setWorldPosition(this.listPos[1].x - (100 * (0 + j)), this.listPos[1].y + (60 * (j + 1)), this.listPos[0].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_2')){\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x, this.listPos[0].y + (120 * (0 + j)), this.listPos[0].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_3')){\r\n                    prefabInstance.setWorldPosition(this.listPos[2].x + (140 * (j - 2)), this.listPos[2].y, this.listPos[2].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_4')){\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x, this.listPos[0].y + (120 * (0 + j)), this.listPos[0].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_5')){\r\n                    prefabInstance.setWorldPosition(this.listPos[3].x + (140 * (j - 2)), this.listPos[3].y, this.listPos[3].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_6')){\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x + (120 * (j - 2)), this.listPos[0].y, this.listPos[0].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_7')){\r\n                    prefabInstance.setWorldPosition(this.listPos[4].x  + (140 * (j - 2)), this.listPos[4].y, this.listPos[4].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_8')){\r\n                    prefabInstance.setWorldPosition(this.listPos[5].x + (140 * (j - 2)), this.listPos[5].y, this.listPos[5].z);\r\n                }\r\n                if(enemyPre.name.endsWith('_9')){\r\n                    prefabInstance.setWorldPosition(this.listPos[6].x + (100 * (0 + j)), this.listPos[6].y + (60 * (j + 1)), this.listPos[6].z);\r\n                }\r\n            }\r\n        }else{return;}\r\n    }\r\n\r\n    spawnBoss1(){\r\n        if(!Plane.instance.spawnEnabled) return;\r\n        this.healthBar[0].node.active = true;\r\n        let enemyPre = this.enemyWave1[10];\r\n        let prefabInstance = instantiate(enemyPre);\r\n        prefabInstance.parent = this.node.parent;\r\n        prefabInstance.setWorldPosition(this.listPos[7]);\r\n    }\r\n    spawnBoss2(){\r\n        if(!Plane.instance.spawnEnabled) return;\r\n        let enemyPre = this.enemyWave2[10];\r\n        let prefabInstance = instantiate(enemyPre);\r\n        prefabInstance.parent = this.node.parent;\r\n        prefabInstance.setWorldPosition(this.listPos[7]);\r\n    }\r\n    spawnBoss3(){\r\n        if(!Plane.instance.spawnEnabled) return;\r\n        let enemyPre = this.enemyWave3[10];\r\n        let prefabInstance = instantiate(enemyPre);\r\n        prefabInstance.parent = this.node.parent;\r\n        prefabInstance.setWorldPosition(this.listPos[7]);\r\n    }\r\n    spawnHeli(){\r\n        if(!Plane.instance.spawnEnabled) return;\r\n        let helicopPre = this.helicop;\r\n        let prefabInstance = instantiate(helicopPre);\r\n        let spawnPos = new Vec3(-690, 225);\r\n        prefabInstance.setPosition(spawnPos);\r\n        this.node.addChild(prefabInstance);\r\n    }\r\n    countPoint(){\r\n        this.destroyCount += 100;\r\n        this.countPointLb.string = `${this.destroyCount}`;\r\n        this.overPointLb.string = `${this.destroyCount}`;\r\n    }\r\n    savePoint(){\r\n        this.overPointLb.string = `${this.destroyCount}`;\r\n        if(this.highPoint < this.destroyCount){\r\n            this.highPoint = this.destroyCount;\r\n            this.highPointLb.string = `${this.highPoint}`;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}