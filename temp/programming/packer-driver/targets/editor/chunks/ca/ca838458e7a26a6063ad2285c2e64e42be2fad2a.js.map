{"version":3,"sources":["file:///D:/Cocos%20Creator/Sky-Hunter/NewProject/assets/scripts/Boss.ts"],"names":["_decorator","Component","Collider2D","Contact2DType","math","Vec3","tween","Prefab","instantiate","macro","Animation","GameCtrl","Plane","AudioToggle","ccclass","property","Boss","randomPosition","bulletCont1","bulletCont2","bulletCont3","maxHealth1","currentHealth1","maxHealth2","currentHealth2","maxHealth3","currentHealth3","isMoving","start","collider","getComponent","on","BEGIN_CONTACT","onBeginContact","END_CONTACT","onEndContact","schedule","spawnBullet","REPEAT_FOREVER","onLoad","instance","moveRandom","update","deltaTime","updateMovingStatus","status","randomX","random","randomY","console","log","distance","node","position","duration","speed","to","call","stop","selfCollider","otherCollider","contact","onAudioQueue","name","startsWith","scheduleOnce","push","updateHealthBar","length","checkTurn2","spawnTurn2","destroy","healthBar","active","checkTurn3","spawnTurn3","checkTurn1","spawnTurn1","spawnEnabled","i","listBulletB1","enemyPre","prefabInstance","parent","setWorldPosition","worldPosition","listBulletB3","j","endsWith","x","y","z","progress"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Collider2D, Contact2DType, math, Vec3, tween, IPhysics2DContact, Prefab, instantiate, macro, Animation, Scene } from 'cc';\r\nimport { GameCtrl } from './GameCtrl';\r\nimport { Plane } from './Plane';\r\nimport { AudioToggle } from './AudioToggle';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Boss')\r\nexport class Boss extends Component {\r\n    static instance: Boss;\r\n    @property(Prefab)\r\n    public listBulletB1: Prefab [] = [];\r\n    @property(Prefab)\r\n    public listBulletB3: Prefab [] = [];\r\n    @property(Animation)\r\n    public laserBullet: Animation = null;\r\n    @property\r\n    speed: number = 100;\r\n    public randomPosition;\r\n    public bulletCont1 = [];\r\n    public bulletCont2 = [];\r\n    public bulletCont3 = [];\r\n    public maxHealth1: number = 50;\r\n    public currentHealth1: number = 50;\r\n    public maxHealth2: number = 100;\r\n    public currentHealth2: number = 100;\r\n    public maxHealth3: number = 150;\r\n    public currentHealth3: number = 150;  \r\n    public isMoving: boolean = true;\r\n    start() {\r\n        let collider = this.getComponent(Collider2D);\r\n        if (collider) {\r\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\r\n            collider.on(Contact2DType.END_CONTACT, this.onEndContact, this);\r\n        }\r\n        this.schedule(this.spawnBullet, 2.5, macro.REPEAT_FOREVER, 0);\r\n    }\r\n    protected onLoad(): void {\r\n        Boss.instance = this;\r\n        this.moveRandom();\r\n        \r\n    }\r\n    update(deltaTime: number) {\r\n    }\r\n\r\n    // Phương thức để quái vật di chuyển đến một vị trí ngẫu nhiên\r\n    updateMovingStatus(status: boolean) {\r\n        this.isMoving = status;\r\n    }\r\n    moveRandom() {\r\n        if (!this.isMoving) {\r\n            return; // Nếu không cần di chuyển thì dừng lại\r\n        }\r\n        const randomX = math.random() * (0 - 1000) + 500;\r\n        const randomY = math.random() * (200 - 600) + 200;\r\n        const randomPosition = new Vec3(randomX, randomY);\r\n        console.log(randomPosition);\r\n        \r\n        const distance = Vec3.distance(this.node.position, randomPosition);\r\n        const duration = distance / this.speed;\r\n\r\n        tween(this.node)\r\n            .to(duration, { position: randomPosition })\r\n            .call(() => {if (!this.isMoving) {tween(this.node).stop();\r\n                return; // Nếu không cần di chuyển thì dừng lại\r\n            }\r\n                this.schedule(this.moveRandom, 5, macro.REPEAT_FOREVER, 0); // Gọi lại moveRandom() để di chuyển đến vị trí mới sau khi hoàn thành tween\r\n            })\r\n            .start();\r\n    }\r\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null){\r\n        AudioToggle.instance.onAudioQueue(7);\r\n\r\n        if(otherCollider.node.name.startsWith('bullet') || otherCollider.node.name.startsWith('rocket')){\r\n            if(this.node.name === 'boss001'){\r\n                this.scheduleOnce(() => {this.bulletCont1.push(otherCollider)});\r\n                this.currentHealth1 -= 1;\r\n                if (this.currentHealth1 <= 0) {\r\n                    this.currentHealth1 = 0;\r\n                }\r\n                this.updateHealthBar();\r\n                if(this.bulletCont1.length >= 50){\r\n                    this.scheduleOnce(() => {GameCtrl.instance.checkTurn2 = true});\r\n                    this.scheduleOnce(() => {GameCtrl.instance.spawnTurn2(0)}, 6);\r\n                    this.scheduleOnce(() => {selfCollider.node.destroy()});\r\n                    GameCtrl.instance.healthBar[0].node.active = false;\r\n                    \r\n                }\r\n            }\r\n            if(this.node.name === 'boss002'){\r\n                this.scheduleOnce(() => {this.bulletCont2.push(otherCollider)});\r\n                this.currentHealth2 -= 1;\r\n                if (this.currentHealth2 <= 0) {\r\n                    this.currentHealth2 = 0;\r\n                }\r\n                this.updateHealthBar();\r\n                if(this.bulletCont2.length >= 100){\r\n                    this.scheduleOnce(() => {GameCtrl.instance.checkTurn3 = true});\r\n                    this.scheduleOnce(() => {GameCtrl.instance.spawnTurn3(0)}, 6);\r\n                    this.scheduleOnce(() => {selfCollider.node.destroy()});\r\n                    GameCtrl.instance.healthBar[1].node.active = false;\r\n                }\r\n            }\r\n            if(this.node.name === 'boss003'){\r\n                this.scheduleOnce(() => {this.bulletCont3.push(otherCollider)});\r\n                this.currentHealth3 -= 1;\r\n                if (this.currentHealth3 <= 0) {\r\n                    this.currentHealth3 = 0;\r\n                }\r\n                this.updateHealthBar();\r\n                if(this.bulletCont3.length >= 150){\r\n                    this.scheduleOnce(() => {GameCtrl.instance.checkTurn1 = true});\r\n                    this.scheduleOnce(() => {GameCtrl.instance.spawnTurn1(0)}, 6);\r\n                    this.scheduleOnce(() => {selfCollider.node.destroy()});\r\n                    GameCtrl.instance.healthBar[2].node.active = false;\r\n                    \r\n                }\r\n            }\r\n            if(otherCollider.node.name.startsWith('bullet') || otherCollider.node.name.startsWith('rocket')){\r\n                this.scheduleOnce(() => {otherCollider.node?.destroy()});\r\n            }\r\n            \r\n        }\r\n    }\r\n    onEndContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null){\r\n\r\n    }\r\n    spawnBullet(){\r\n        if(!Plane.instance.spawnEnabled) return;\r\n        if(this.node.name === 'boss001'){\r\n            for(let i = 0; i < this.listBulletB1.length; i++){\r\n            let enemyPre = this.listBulletB1[i];\r\n            let prefabInstance = instantiate(enemyPre);\r\n            prefabInstance.parent = this.node.parent;\r\n            prefabInstance.setWorldPosition(this.node.worldPosition);\r\n            }\r\n        }\r\n        if(this.node.name === 'boss002'){\r\n            return;\r\n        }\r\n        if(this.node.name === 'boss003'){\r\n            for( let i = 0; i < this.listBulletB3.length; i++){\r\n                for(let j = 0; j < 5; j++){\r\n                    let enemyPre = this.listBulletB3[i];\r\n                    let prefabInstance = instantiate(enemyPre);\r\n                    prefabInstance.parent = this.node.parent;\r\n    \r\n                    if(enemyPre.name.endsWith('_0') || enemyPre.name.endsWith('_1') || enemyPre.name.endsWith('_2') || enemyPre.name.endsWith('_3') || enemyPre.name.endsWith('_4')){\r\n                        prefabInstance.setWorldPosition(this.node.worldPosition.x - 105, this.node.worldPosition.y - 65, this.node.worldPosition.z);\r\n                    }\r\n                    if(enemyPre.name.endsWith('_5') || enemyPre.name.endsWith('_6') || enemyPre.name.endsWith('_7') || enemyPre.name.endsWith('_8') || enemyPre.name.endsWith('_9')){\r\n                        prefabInstance.setWorldPosition(this.node.worldPosition.x + 105, this.node.worldPosition.y - 65, this.node.worldPosition.z);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    updateHealthBar() {\r\n        if (GameCtrl.instance.healthBar[0]) {\r\n            GameCtrl.instance.healthBar[0].progress = this.currentHealth1 / this.maxHealth1;\r\n        }if (GameCtrl.instance.healthBar[1]) {\r\n            GameCtrl.instance.healthBar[1].progress = this.currentHealth2 / this.maxHealth2;\r\n        }if (GameCtrl.instance.healthBar[2]) {\r\n            GameCtrl.instance.healthBar[2].progress = this.currentHealth3 / this.maxHealth3;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}