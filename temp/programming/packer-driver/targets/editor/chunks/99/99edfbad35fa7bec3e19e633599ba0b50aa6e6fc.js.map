{"version":3,"sources":["file:///D:/Cocos%20Creator/Sky-Hunter/NewProject/assets/scripts/Boss3.ts"],"names":["_decorator","instantiate","RigidBody2D","Boss","GameCtrl","ButtonPlayScene","ccclass","property","Boss3","update","dt","start","onBeginContact","selfCollider","otherCollider","contact","scheduleOnce","bulletCont3","push","currentHealth3","instance","healthBar","progress","maxHealth3","length","countPoint","node","active","destroy","maxHealth1","currentHealth1","schedule","spawnTurn1","spawnBullet","spawnEnabled","i","bulletVelos","enemyPre","bulletE","j","prefabInstance","parent","getComponent","linearVelocity","setWorldPosition","worldPosition","x","y","z"],"mappings":"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","sourcesContent":["import { _decorator, Collider2D, Component, instantiate, IPhysics2DContact, Node, RigidBody2D } from 'cc';\r\nimport { Boss } from './Boss';\r\nimport { GameCtrl } from './GameCtrl';\r\nimport { ButtonPlayScene } from './ButtonPlayScene';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Boss3')\r\nexport class Boss3 extends Boss {\r\n    update(dt: number): void {\r\n        super.update(dt);\r\n    }\r\n    start() {\r\n        super.start();\r\n    }\r\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact){\r\n        super.onBeginContact(selfCollider, otherCollider, contact);\r\n        this.scheduleOnce(() => {this.bulletCont3.push(otherCollider)});\r\n        this.currentHealth3 -= 1;\r\n        if (this.currentHealth3 <= 0) {\r\n            this.currentHealth3 = 0;\r\n        }\r\n        GameCtrl.instance.healthBar.progress = this.currentHealth3 / this.maxHealth3;\r\n        if(this.bulletCont3.length >= 150){\r\n            this.scheduleOnce(() => {GameCtrl.instance.countPoint(1000)});\r\n            GameCtrl.instance.healthBar.node.active = false;  \r\n            this.scheduleOnce(() => {selfCollider.node.destroy()});\r\n            this.maxHealth1 = 50;\r\n            this.currentHealth1 = 50;\r\n            GameCtrl.instance.schedule(GameCtrl.instance.spawnTurn1, 7, 9, 0);\r\n        }\r\n    }\r\n    spawnBullet() {\r\n        if(!ButtonPlayScene.instance.spawnEnabled) return;\r\n        for( let i = 0; i < this.bulletVelos.length; i++){\r\n            let enemyPre = this.bulletE;\r\n            for(let j = 0; j < 3; j++){\r\n                let prefabInstance = instantiate(enemyPre);\r\n                prefabInstance.parent = this.node.parent;\r\n                prefabInstance.getComponent(RigidBody2D).linearVelocity = this.bulletVelos[i];\r\n                if(j === 0){\r\n                    prefabInstance.setWorldPosition(this.node.worldPosition.x - 105, this.node.worldPosition.y - 65, this.node.worldPosition.z);\r\n                }\r\n                if(j === 1){\r\n                    prefabInstance.setWorldPosition(this.node.worldPosition.x + 105, this.node.worldPosition.y - 65, this.node.worldPosition.z);\r\n                }\r\n                if(j === 2){\r\n                    prefabInstance.setWorldPosition(this.node.worldPosition.x, this.node.worldPosition.y, this.node.worldPosition.z);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}