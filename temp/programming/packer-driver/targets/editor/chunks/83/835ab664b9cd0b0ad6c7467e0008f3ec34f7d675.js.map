{"version":3,"sources":["file:///D:/Cocos%20Creator/Sky-Hunter/NewProject/assets/scripts/AudioToggle.ts"],"names":["_decorator","AudioClip","AudioSource","Component","Node","Toggle","sys","ccclass","property","AudioToggle","audioStatus","musicStatus","onLoad","instance","audioTogFunc","musicTogFunc","onAudioQueue","index","clip","clips","audioSrc","playOneShot","savedStatus","localStorage","getItem","audioTog","isChecked","turnOnA","active","turnOffA","volume","node","on","musicTog","setItem","turnOnM","turnOffM","musicSrc"],"mappings":"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","sourcesContent":["import { _decorator, AudioClip, AudioSource, Component, Node, Toggle, sys } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AudioToggle')\r\nexport class AudioToggle extends Component {\r\n    static instance: AudioToggle;\r\n\r\n    @property(AudioClip)\r\n    public clips: AudioClip [] = [];\r\n\r\n    @property(Toggle)\r\n    public audioTog: Toggle = null;\r\n    @property(Node)\r\n    public turnOnA: Node = null;\r\n    @property(Node)\r\n    public turnOffA: Node = null;\r\n    @property(AudioSource)\r\n    public audioSrc: AudioSource = null;\r\n\r\n    @property(Toggle)\r\n    public musicTog: Toggle = null;\r\n    @property(Node)\r\n    public turnOnM: Node = null;\r\n    @property(Node)\r\n    public turnOffM: Node = null;\r\n    @property(AudioSource)\r\n    public musicSrc: AudioSource = null;\r\n\r\n    private audioStatus: boolean = false;\r\n    private musicStatus: boolean = false;\r\n\r\n    protected onLoad(): void {\r\n        AudioToggle.instance = this;\r\n        this.audioTogFunc();\r\n        this.musicTogFunc();\r\n    }\r\n\r\n    onAudioQueue(index: number){\r\n        let clip: AudioClip = this.clips[index];\r\n        this.audioSrc.playOneShot(clip);\r\n    }\r\n\r\n    audioTogFunc(){\r\n        this.onAudioQueue(2);\r\n        let savedStatus = sys.localStorage.getItem('audioStatus');\r\n        if (savedStatus === 'on') {\r\n        this.audioStatus = true;\r\n        this.audioTog.isChecked = true;\r\n        this.turnOnA.active = true;\r\n        this.turnOffA.active = false;\r\n        this.audioSrc.volume = 0.3;\r\n        } else if (savedStatus === 'off') {\r\n        this.audioStatus = false;\r\n        this.audioTog.isChecked = false;\r\n        this.turnOnA.active = false;\r\n        this.turnOffA.active = true;\r\n        this.audioSrc.volume = 0;\r\n        }\r\n        this.audioTog.node.on('toggle', () => {\r\n        this.audioStatus = this.musicTog.isChecked;\r\n        sys.localStorage.setItem('audioStatus', this.audioStatus ? 'on' : 'off');\r\n        if (this.audioStatus) {\r\n            this.turnOnA.active = true;\r\n            this.turnOffA.active = false;\r\n            this.audioSrc.volume = 0.3;\r\n        } else {\r\n            this.turnOnA.active = false;\r\n            this.turnOffA.active = true;\r\n            this.audioSrc.volume = 0;\r\n        }\r\n        });\r\n        \r\n    }\r\n    musicTogFunc(){\r\n        this.onAudioQueue(2);\r\n        let savedStatus = sys.localStorage.getItem('musicStatus');\r\n        if (savedStatus === 'on') {\r\n        this.musicStatus = true;\r\n        this.musicTog.isChecked = true;\r\n        this.turnOnM.active = true;\r\n        this.turnOffM.active = false;\r\n        this.musicSrc.volume = 0.3;\r\n        } else if (savedStatus === 'off') {\r\n        this.musicStatus = false;\r\n        this.musicTog.isChecked = false;\r\n        this.turnOnM.active = false;\r\n        this.turnOffM.active = true;\r\n        this.musicSrc.volume = 0;\r\n        }\r\n        this.musicTog.node.on('toggle', () => {\r\n        this.musicStatus = this.musicTog.isChecked;\r\n        sys.localStorage.setItem('musicStatus', this.musicStatus ? 'on' : 'off');\r\n        if (this.musicStatus) {\r\n            this.turnOnM.active = true;\r\n            this.turnOffM.active = false;\r\n            this.musicSrc.volume = 0.3;\r\n        } else {\r\n            this.turnOnM.active = false;\r\n            this.turnOffM.active = true;\r\n            this.musicSrc.volume = 0;\r\n        }\r\n        });\r\n        \r\n    }\r\n}\r\n\r\n\r\n"]}