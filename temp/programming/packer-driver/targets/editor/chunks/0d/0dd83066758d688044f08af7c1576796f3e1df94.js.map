{"version":3,"sources":["file:///D:/Cocos%20Creator/Sky-Hunter/NewProject/assets/scripts/Boss1.ts"],"names":["_decorator","instantiate","macro","RigidBody2D","Boss","ButtonPlayScene","GameCtrl","ccclass","property","Boss1","update","dt","start","onLoad","schedule","spawnBullet","REPEAT_FOREVER","onBeginContact","selfCollider","otherCollider","contact","scheduleOnce","bulletCont","push","currentHealth","instance","healthBar","progress","maxHealth","length","countPoint","node","active","destroy","spawnTurn2","spawnEnabled","i","bulletVelos","enemyPre","bulletE","prefabInstance","getComponent","linearVelocity","parent","setWorldPosition","worldPosition"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAwBC,MAAAA,W,OAAAA,W;AAAgCC,MAAAA,K,OAAAA,K;AAAaC,MAAAA,W,OAAAA,W;;AACrEC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,e,iBAAAA,e;;AACAC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;uBAGjBS,K,WADZF,OAAO,CAAC,OAAD,C,gBAAR,MACaE,KADb;AAAA;AAAA,wBAC+B;AAC3BC,QAAAA,MAAM,CAACC,EAAD,EAAmB;AACrB,gBAAMD,MAAN,CAAaC,EAAb;AACH;;AACDC,QAAAA,KAAK,GAAG;AACJ,gBAAMA,KAAN;AACH;;AACSC,QAAAA,MAAM,GAAS;AACrB,eAAKC,QAAL,CAAc,KAAKC,WAAnB,EAAgC,GAAhC,EAAqCb,KAAK,CAACc,cAA3C,EAA2D,CAA3D;AACH;;AACDC,QAAAA,cAAc,CAACC,YAAD,EAA2BC,aAA3B,EAAsDC,OAAtD,EAAiF;AAC3F,gBAAMH,cAAN,CAAqBC,YAArB,EAAmCC,aAAnC,EAAkDC,OAAlD;AACA,eAAKC,YAAL,CAAkB,MAAM;AAAC,iBAAKC,UAAL,CAAgBC,IAAhB,CAAqBJ,aAArB;AAAoC,WAA7D;AACA,eAAKK,aAAL,IAAsB,CAAtB;;AACA,cAAI,KAAKA,aAAL,IAAsB,CAA1B,EAA6B;AACzB,iBAAKA,aAAL,GAAqB,CAArB;AACH;;AACD;AAAA;AAAA,oCAASC,QAAT,CAAkBC,SAAlB,CAA4BC,QAA5B,GAAuC,KAAKH,aAAL,GAAqB,KAAKI,SAAjE;;AACA,cAAG,KAAKN,UAAL,CAAgBO,MAAhB,IAA0B,EAA7B,EAAgC;AAC5B,iBAAKR,YAAL,CAAkB,MAAM;AAAC;AAAA;AAAA,wCAASI,QAAT,CAAkBK,UAAlB,CAA6B,IAA7B;AAAmC,aAA5D;AACA;AAAA;AAAA,sCAASL,QAAT,CAAkBC,SAAlB,CAA4BK,IAA5B,CAAiCC,MAAjC,GAA0C,KAA1C;AACA,iBAAKX,YAAL,CAAkB,MAAM;AAACH,cAAAA,YAAY,CAACa,IAAb,CAAkBE,OAAlB;AAA4B,aAArD;AACA;AAAA;AAAA,sCAASR,QAAT,CAAkBX,QAAlB,CAA2B;AAAA;AAAA,sCAASW,QAAT,CAAkBS,UAA7C,EAAyD,CAAzD,EAA4D,CAA5D,EAA+D,CAA/D;AACA,iBAAKZ,UAAL,GAAkB,EAAlB;AACH;AACJ;;AACDP,QAAAA,WAAW,GAAG;AACV,cAAG,CAAC;AAAA;AAAA,kDAAgBU,QAAhB,CAAyBU,YAA7B,EAA2C;;AAC3C,eAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,KAAKC,WAAL,CAAiBR,MAApC,EAA4CO,CAAC,EAA7C,EAAgD;AAChD,gBAAIE,QAAQ,GAAG,KAAKC,OAApB;AACA,gBAAIC,cAAc,GAAGvC,WAAW,CAACqC,QAAD,CAAhC;AACAE,YAAAA,cAAc,CAACC,YAAf,CAA4BtC,WAA5B,EAAyCuC,cAAzC,GAA0D,KAAKL,WAAL,CAAiBD,CAAjB,CAA1D;AACAI,YAAAA,cAAc,CAACG,MAAf,GAAwB,KAAKZ,IAAL,CAAUY,MAAlC;AACAH,YAAAA,cAAc,CAACI,gBAAf,CAAgC,KAAKb,IAAL,CAAUc,aAA1C;AACC;AACJ;;AAnC0B,O","sourcesContent":["import { _decorator, Collider2D, instantiate, IPhysics2DContact, macro, math, RigidBody2D, Vec3 } from \"cc\";\r\nimport { Boss } from \"./Boss\";\r\nimport { ButtonPlayScene } from \"./ButtonPlayScene\";\r\nimport { GameCtrl } from \"./GameCtrl\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Boss1')\r\nexport class Boss1 extends Boss{\r\n    update(dt: number): void {\r\n        super.update(dt);\r\n    }\r\n    start() {\r\n        super.start();\r\n    }\r\n    protected onLoad(): void {\r\n        this.schedule(this.spawnBullet, 2.5, macro.REPEAT_FOREVER, 0);\r\n    }\r\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact){\r\n        super.onBeginContact(selfCollider, otherCollider, contact);\r\n        this.scheduleOnce(() => {this.bulletCont.push(otherCollider)});\r\n        this.currentHealth -= 3;\r\n        if (this.currentHealth <= 0) {\r\n            this.currentHealth = 0;\r\n        }\r\n        GameCtrl.instance.healthBar.progress = this.currentHealth / this.maxHealth;\r\n        if(this.bulletCont.length >= 50){   \r\n            this.scheduleOnce(() => {GameCtrl.instance.countPoint(1000)});\r\n            GameCtrl.instance.healthBar.node.active = false;      \r\n            this.scheduleOnce(() => {selfCollider.node.destroy()}); \r\n            GameCtrl.instance.schedule(GameCtrl.instance.spawnTurn2, 7, 9, 0);\r\n            this.bulletCont = [];\r\n        }\r\n    }\r\n    spawnBullet() {\r\n        if(!ButtonPlayScene.instance.spawnEnabled) return;\r\n        for(let i = 0; i < this.bulletVelos.length; i++){\r\n        let enemyPre = this.bulletE;\r\n        let prefabInstance = instantiate(enemyPre);\r\n        prefabInstance.getComponent(RigidBody2D).linearVelocity = this.bulletVelos[i];\r\n        prefabInstance.parent = this.node.parent;\r\n        prefabInstance.setWorldPosition(this.node.worldPosition);\r\n        }\r\n    }\r\n}"]}