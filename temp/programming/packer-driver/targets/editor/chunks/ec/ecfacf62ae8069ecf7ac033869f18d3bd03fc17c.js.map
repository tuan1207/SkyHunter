{"version":3,"sources":["file:///D:/Cocos%20Creator/Sky-Hunter/NewProject/assets/scripts/BulletE.ts"],"names":["_decorator","Component","Collider2D","Contact2DType","instantiate","Prefab","ccclass","property","BulletE","speed","start","collider","getComponent","on","BEGIN_CONTACT","onBeginContact","END_CONTACT","onEndContact","bulletMove","update","deltaTime","destroyB","destroyPrefab","destroyPre","prefabInstance","parent","node","setWorldPosition","worldPosition","selfCollider","otherCollider","contact","name","startsWith","scheduleOnce","destroy"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,a,OAAAA,a;AAAeC,MAAAA,W,OAAAA,W;AAAgCC,MAAAA,M,OAAAA,M;;;;;;;;;OAE3F;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;yBAGjBQ,O,WADZF,OAAO,CAAC,SAAD,C,UAGHC,QAAQ,CAACF,MAAD,C,2BAHb,MACaG,OADb,SAC6BP,SAD7B,CACuC;AAAA;AAAA;AAAA,eAC3BQ,KAD2B,GACX,EADW;;AAAA;AAAA;;AAInCC,QAAAA,KAAK,GAAG;AACJ,cAAIC,QAAQ,GAAG,KAAKC,YAAL,CAAkBV,UAAlB,CAAf;;AACA,cAAGS,QAAH,EAAY;AACRA,YAAAA,QAAQ,CAACE,EAAT,CAAYV,aAAa,CAACW,aAA1B,EAAyC,KAAKC,cAA9C,EAA8D,IAA9D;AACAJ,YAAAA,QAAQ,CAACE,EAAT,CAAYV,aAAa,CAACa,WAA1B,EAAuC,KAAKC,YAA5C,EAA0D,IAA1D;AACH;;AACD,eAAKC,UAAL;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AACDF,QAAAA,UAAU,GAAE,CACX;;AACDG,QAAAA,QAAQ,GAAE;AACN,cAAIC,aAAa,GAAG,KAAKC,UAAzB;AACA,cAAIC,cAAc,GAAGpB,WAAW,CAACkB,aAAD,CAAhC;AACAE,UAAAA,cAAc,CAACC,MAAf,GAAwB,KAAKC,IAAL,CAAUD,MAAlC;AACAD,UAAAA,cAAc,CAACG,gBAAf,CAAgC,KAAKD,IAAL,CAAUE,aAA1C;AACH;;AACDb,QAAAA,cAAc,CAACc,YAAD,EAA2BC,aAA3B,EAAsDC,OAAtD,EAAwF;AAClG,cAAGD,aAAa,CAACE,IAAd,CAAmBC,UAAnB,CAA8B,SAA9B,CAAH,EAA4C;AACxC,iBAAKZ,QAAL;AACA,iBAAKa,YAAL,CAAkB,MAAM;AAAA;;AAAC,oCAAAL,YAAY,CAACH,IAAb,wCAAmBS,OAAnB;AAA6B,aAAtD;AACH;AACJ;;AACDlB,QAAAA,YAAY,CAACY,YAAD,EAA2BC,aAA3B,EAAsDC,OAAtD,EAAwF,CAEnG;;AAhCkC,O;;;;;iBAGP,I","sourcesContent":["import { _decorator, Component, Node, Collider2D, Contact2DType, instantiate, IPhysics2DContact, Prefab } from 'cc';\r\nimport { Plane } from './Plane';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BulletE')\r\nexport class BulletE extends Component {\r\n    private speed: number = 10;\r\n    @property(Prefab)\r\n    public destroyPre: Prefab = null;\r\n    start() {\r\n        let collider = this.getComponent(Collider2D);\r\n        if(collider){\r\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\r\n            collider.on(Contact2DType.END_CONTACT, this.onEndContact, this);\r\n        }\r\n        this.bulletMove();\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n    bulletMove(){\r\n    }\r\n    destroyB(){\r\n        let destroyPrefab = this.destroyPre;\r\n        let prefabInstance = instantiate(destroyPrefab);\r\n        prefabInstance.parent = this.node.parent;\r\n        prefabInstance.setWorldPosition(this.node.worldPosition);\r\n    }\r\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null){\r\n        if(otherCollider.name.startsWith('DEFAULT')){\r\n            this.destroyB();\r\n            this.scheduleOnce(() => {selfCollider.node?.destroy()});\r\n        }\r\n    }\r\n    onEndContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null){\r\n\r\n    }\r\n}\r\n\r\n\r\n"]}