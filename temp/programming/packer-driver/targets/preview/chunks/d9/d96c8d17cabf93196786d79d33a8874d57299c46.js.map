{"version":3,"sources":["file:///D:/Cocos%20Creator/Sky-Hunter/NewProject/assets/scripts/AudioToggle.ts"],"names":["_decorator","AudioClip","AudioSource","Component","Node","sys","ccclass","property","AudioToggle","audioStatus","musicStatus","onLoad","instance","updateUI","update","dt","savedAStatus","localStorage","getItem","turnOnA","active","turnOffA","audioSrc","volume","savedMStatus","turnOnM","turnOffM","musicSrc","onAudioQueue","index","clip","clips","playOneShot","audioTogFunc","setItem","musicTogFunc"],"mappings":"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","sourcesContent":["import { _decorator, AudioClip, AudioSource, Component, Node, Toggle, sys } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AudioToggle')\r\nexport class AudioToggle extends Component {\r\n    static instance: AudioToggle;\r\n\r\n    @property(AudioClip)\r\n    public clips: AudioClip [] = [];\r\n\r\n    @property(Node)\r\n    public turnOnA: Node = null;\r\n    @property(Node)\r\n    public turnOffA: Node = null;\r\n    @property(AudioSource)\r\n    public audioSrc: AudioSource = null;\r\n\r\n    @property(Node)\r\n    public turnOnM: Node = null;\r\n    @property(Node)\r\n    public turnOffM: Node = null;\r\n    @property(AudioSource)\r\n    public musicSrc: AudioSource = null;\r\n\r\n    private audioStatus: boolean = true;\r\n    private musicStatus: boolean = true;\r\n\r\n\r\n\r\n    protected onLoad(): void {\r\n        AudioToggle.instance = this;\r\n        this.updateUI();\r\n    }\r\n    protected update(dt: number): void {\r\n        \r\n    }\r\n    updateUI(){\r\n        let savedAStatus = sys.localStorage.getItem('audioStatus')??'on';\r\n        if(savedAStatus === 'on'){\r\n            this.audioStatus = true;\r\n            this.turnOnA.active = true;\r\n            this.turnOffA.active = false;\r\n            this.audioSrc.volume = 0.2;\r\n        }else if(savedAStatus === 'off'){\r\n            this.audioStatus = false;\r\n            this.turnOnA.active = false;\r\n            this.turnOffA.active = true;\r\n            this.audioSrc.volume = 0;\r\n        }\r\n        \r\n        let savedMStatus = sys.localStorage.getItem('musicStatus')??'on';\r\n        if(savedMStatus === 'on'){\r\n            this.turnOnM.active = true;\r\n            this.turnOffM.active = false;\r\n            this.musicSrc.volume = 0.2;\r\n        }else if(savedMStatus === 'off'){\r\n            this.turnOnM.active = false;\r\n            this.turnOffM.active = true;\r\n            this.musicSrc.volume = 0;\r\n        }\r\n    }\r\n\r\n    onAudioQueue(index: number){\r\n        let clip: AudioClip = this.clips[index];\r\n        this.audioSrc.playOneShot(clip);\r\n    }\r\n\r\n    audioTogFunc(){\r\n        this.audioStatus = !this.audioStatus;\r\n        sys.localStorage.setItem('audioStatus', this.audioStatus ? 'on':'off');\r\n        this.updateUI();\r\n    }\r\n    musicTogFunc(){\r\n        this.musicStatus = !this.musicStatus;\r\n        sys.localStorage.setItem('musicStatus', this.musicStatus ? 'on':'off');\r\n        this.updateUI();\r\n    }\r\n}\r\n\r\n\r\n"]}