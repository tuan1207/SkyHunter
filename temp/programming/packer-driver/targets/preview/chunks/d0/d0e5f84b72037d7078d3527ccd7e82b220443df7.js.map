{"version":3,"sources":["file:///D:/Cocos%20Creator/Sky-Hunter/NewProject/assets/scripts/Background.ts"],"names":["_decorator","Component","Node","Vec3","UITransform","director","Canvas","ccclass","property","Background","bgHeight1","bgHeight2","bgHeight3","tempStartLocation1","tempStartLocation2","tempStartLocation3","gameSpeed","onLoad","startUp","BG1","getComponent","height","BG2","BG3","y","setPosition","update","deltaTime","position","scene","getScene","canvas","getComponentInChildren"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Vec3, UITransform, director, Canvas } from 'cc';\r\nimport { Plane } from './Plane';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Background')\r\nexport class Background extends Component {\r\n    @property(Node)\r\n    public BG1: Node = null;\r\n    @property(Node)\r\n    public BG2: Node = null;\r\n    @property(Node)\r\n    public BG3: Node = null;\r\n\r\n    public bgHeight1: number;\r\n    public bgHeight2: number;\r\n    public bgHeight3: number;\r\n\r\n    public tempStartLocation1 = new Vec3;\r\n    public tempStartLocation2 = new Vec3;\r\n    public tempStartLocation3 = new Vec3;\r\n\r\n\r\n    public gameSpeed: number = 50;\r\n\r\n    protected onLoad(): void {\r\n        this.startUp();\r\n    }\r\n\r\n    startUp(){\r\n        this.bgHeight1 = this.BG1.getComponent(UITransform).height;\r\n        this.bgHeight2 = this.BG2.getComponent(UITransform).height;\r\n        this.bgHeight3 = this.BG3.getComponent(UITransform).height;\r\n\r\n        this.tempStartLocation1.y = 0;\r\n        this.tempStartLocation2.y = this.bgHeight1;\r\n        this.tempStartLocation3.y = this.bgHeight1 + this.bgHeight2;\r\n\r\n        this.BG1.setPosition(this.tempStartLocation1);\r\n        this.BG2.setPosition(this.tempStartLocation2);\r\n        this.BG3.setPosition(this.tempStartLocation3);\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        // if (!Plane.instance.moveEnable) {\r\n        //     return;\r\n        // }\r\n        this.tempStartLocation1 = this.BG1.position;\r\n        this.tempStartLocation2 = this.BG2.position;\r\n        this.tempStartLocation3 = this.BG3.position;\r\n\r\n        this.tempStartLocation1.y -= this.gameSpeed * deltaTime;\r\n        this.tempStartLocation2.y -= this.gameSpeed * deltaTime;\r\n        this.tempStartLocation3.y -= this.gameSpeed * deltaTime;\r\n\r\n        const scene = director.getScene();\r\n        const canvas = scene.getComponentInChildren(Canvas);\r\n        if(this.tempStartLocation1.y <= (0 - this.bgHeight1)){\r\n            this.tempStartLocation1.y = canvas.getComponent(UITransform).height;\r\n        }\r\n        if(this.tempStartLocation2.y <= (0 - this.bgHeight2)){\r\n            this.tempStartLocation2.y = canvas.getComponent(UITransform).height;\r\n        }\r\n        if(this.tempStartLocation3.y <= (0 - this.bgHeight3)){\r\n            this.tempStartLocation3.y = canvas.getComponent(UITransform).height;\r\n        }\r\n\r\n        this.BG1.setPosition(this.tempStartLocation1);\r\n        this.BG2.setPosition(this.tempStartLocation2);\r\n        this.BG3.setPosition(this.tempStartLocation3);\r\n\r\n    }\r\n}\r\n\r\n\r\n"]}