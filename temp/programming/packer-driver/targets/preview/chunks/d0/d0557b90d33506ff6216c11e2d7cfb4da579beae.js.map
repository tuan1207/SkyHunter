{"version":3,"sources":["file:///D:/Cocos%20Creator/Sky-Hunter/NewProject/assets/scripts/Enemy.ts"],"names":["_decorator","Component","Vec3","Prefab","instantiate","Collider2D","Contact2DType","GameCtrl","ccclass","property","Enemy","bulletSpeed","posX","posY","contE2","contE3","start","collider","getComponent","on","BEGIN_CONTACT","onBeginContact","END_CONTACT","onEndContact","console","log","node","position","update","deltaTime","enemyMove","destroyB","destroyPrefab","destroyPre","prefabInstance","parent","setWorldPosition","worldPosition","selfCollider","otherCollider","contact","name","startsWith","scheduleOnce","destroy","instance","countPoint","push","length","endsWith","x","y","posBullet","setPosition"],"mappings":"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","sourcesContent":["import { _decorator, Component, tween, Vec3, Node, Prefab, instantiate, Collider2D, Contact2DType, IPhysics2DContact } from 'cc';\r\nimport { GameCtrl } from './GameCtrl';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Enemy')\r\nexport class Enemy extends Component {\r\n    @property(Prefab)\r\n    public destroyPre: Prefab = null;\r\n\r\n    public bulletSpeed: number = 5;\r\n    private posX: number;\r\n    private posY: number;\r\n    private contE2 = [];\r\n    private contE3 = [];\r\n    start() {\r\n        let collider = this.getComponent(Collider2D);\r\n        if(collider){\r\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\r\n            collider.on(Contact2DType.END_CONTACT, this.onEndContact, this);\r\n        }\r\n        console.log(this.node.position);\r\n        \r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        this.enemyMove();\r\n    }\r\n    destroyB(){\r\n        let destroyPrefab = this.destroyPre;\r\n        let prefabInstance = instantiate(destroyPrefab);\r\n        prefabInstance.parent = this.node.parent;\r\n        prefabInstance.setWorldPosition(this.node.worldPosition);\r\n    }\r\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null){\r\n        if(selfCollider.node.name.startsWith('enemy1')){\r\n            this.scheduleOnce(() => {selfCollider.node.destroy()});\r\n            this.scheduleOnce(() => {GameCtrl.instance.countPoint()});\r\n            \r\n        }\r\n        if(selfCollider.node.name.startsWith('enemy2')){\r\n            this.scheduleOnce(() => {this.contE2.push(otherCollider.node)});\r\n            if(this.contE2.length === 2){\r\n                this.scheduleOnce(() => {selfCollider.node.destroy()});\r\n                this.scheduleOnce(() => {GameCtrl.instance.countPoint()});\r\n            }\r\n        }\r\n        if(selfCollider.node.name.startsWith('enemy3')){\r\n            this.scheduleOnce(() => {this.contE3.push(otherCollider.node)});\r\n            if(this.contE2.length === 3 ){\r\n                this.scheduleOnce(() => {selfCollider.node.destroy()});\r\n                this.scheduleOnce(() => {GameCtrl.instance.countPoint()});\r\n            }\r\n        }\r\n    }\r\n    onEndContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null){\r\n\r\n    }\r\n    enemyMove(){\r\n        if(this.node.name.endsWith('_0')){\r\n            this.posX = this.node.position.x;\r\n            this.posY = this.node.position.y;\r\n\r\n            this.posY -= this.bulletSpeed * 0.75;\r\n            let posBullet = new Vec3(this.posX, this.posY);\r\n            this.node.setPosition(posBullet);\r\n        }\r\n        if(this.node.name.endsWith('_1')){\r\n            this.posX = this.node.position.x;\r\n            this.posY = this.node.position.y;\r\n\r\n            this.posX += this.bulletSpeed * 0.75;\r\n            this.posY -= this.bulletSpeed * 0.5;\r\n            let posBullet = new Vec3(this.posX, this.posY);\r\n            this.node.setPosition(posBullet);\r\n        }\r\n        if(this.node.name.endsWith('_2')){\r\n            this.posX = this.node.position.x;\r\n            this.posY = this.node.position.y;\r\n                \r\n            if(this.posY > 40){\r\n                this.posY -= this.bulletSpeed * 0.75;\r\n            }else{\r\n                this.posX += this.bulletSpeed ;\r\n            }\r\n            \r\n            let posBullet = new Vec3(this.posX, this.posY);\r\n            this.node.setPosition(posBullet);\r\n        }\r\n        if(this.node.name.endsWith('_3')){\r\n            this.posX = this.node.position.x;\r\n            this.posY = this.node.position.y;\r\n\r\n            this.posX += this.bulletSpeed * 0.75;\r\n            let posBullet = new Vec3(this.posX, this.posY);\r\n            this.node.setPosition(posBullet);\r\n        }\r\n        if(this.node.name.endsWith('_4')){\r\n            this.posX = this.node.position.x;\r\n            this.posY = this.node.position.y;\r\n                \r\n            if(this.posY > 40){\r\n                this.posY -= this.bulletSpeed * 0.75;\r\n            }else{\r\n                this.posX -= this.bulletSpeed ;\r\n            }\r\n            let posBullet = new Vec3(this.posX, this.posY);\r\n            this.node.setPosition(posBullet);\r\n        }\r\n        if(this.node.name.endsWith('_5')){\r\n            this.posX = this.node.position.x;\r\n            this.posY = this.node.position.y;\r\n\r\n            if(this.posX < -360){\r\n                this.posX += this.bulletSpeed * 0.75;\r\n            }else{\r\n                this.posX += this.bulletSpeed * 0.75;\r\n                this.posY -= this.bulletSpeed * 0.5;\r\n            }\r\n            let posBullet = new Vec3(this.posX, this.posY);\r\n            this.node.setPosition(posBullet);\r\n        }\r\n        if(this.node.name.endsWith('_6')){\r\n            this.posX = this.node.position.x;\r\n            this.posY = this.node.position.y;\r\n\r\n            \r\n            if(this.posY > 200){\r\n                this.posY -= this.bulletSpeed * 0.75;\r\n            }else{return;}\r\n            let posBullet = new Vec3(this.posX, this.posY);\r\n            this.node.setPosition(posBullet);\r\n        }\r\n        if(this.node.name.endsWith('_7')){\r\n            this.posX = this.node.position.x;\r\n            this.posY = this.node.position.y;\r\n\r\n            this.posX -= this.bulletSpeed;\r\n            let posBullet = new Vec3(this.posX, this.posY);\r\n            this.node.setPosition(posBullet);\r\n        }\r\n        if(this.node.name.endsWith('_8')){\r\n            this.posX = this.node.position.x;\r\n            this.posY = this.node.position.y;\r\n\r\n            if(this.posX > 360){\r\n                this.posX -= this.bulletSpeed * 0.75;\r\n            }else{\r\n                this.posX -= this.bulletSpeed * 0.75;\r\n                this.posY -= this.bulletSpeed * 0.5;\r\n            }\r\n            let posBullet = new Vec3(this.posX, this.posY);\r\n            this.node.setPosition(posBullet);\r\n        }\r\n        if(this.node.name.endsWith('_9')){\r\n            this.posX = this.node.position.x;\r\n            this.posY = this.node.position.y;\r\n\r\n            this.posX -= this.bulletSpeed * 0.75;\r\n            this.posY -= this.bulletSpeed * 0.5;\r\n            let posBullet = new Vec3(this.posX, this.posY);\r\n            this.node.setPosition(posBullet);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}