{"version":3,"sources":["file:///D:/Cocos%20Creator/Sky-Hunter/NewProject/assets/scripts/Enemy.ts"],"names":["_decorator","Component","Vec3","Prefab","instantiate","Collider2D","Contact2DType","GameCtrl","AudioToggle","ButtonPlayScene","ccclass","property","Enemy","bulletSpeed","posX","posY","contE2","contE3","onLoad","instance","start","collider","getComponent","on","BEGIN_CONTACT","onBeginContact","END_CONTACT","onEndContact","update","deltaTime","enemyMove","destroyB","destroyPrefab","destroyPre","prefabInstance","parent","node","setWorldPosition","worldPosition","selfCollider","otherCollider","contact","onAudioQueue","name","startsWith","scheduleOnce","destroy","countPoint","push","length","moveEnable","countElement","position","x","y","posBullet0","setPosition","posBullet1","posBullet2","posBullet3","posBullet4","posBullet5","posBullet6","posBullet7","posBullet8","posBullet9"],"mappings":"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","sourcesContent":["import { _decorator, Component, tween, Vec3, Node, Prefab, instantiate, Collider2D, Contact2DType, IPhysics2DContact } from 'cc';\r\nimport { GameCtrl } from './GameCtrl';\r\nimport { Plane } from './Plane';\r\nimport { AudioToggle } from './AudioToggle';\r\nimport { ButtonPlayScene } from './ButtonPlayScene';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Enemy')\r\nexport class Enemy extends Component {\r\n    static instance: Enemy;\r\n    @property(Prefab)\r\n    public destroyPre: Prefab = null;\r\n\r\n    public bulletSpeed: number = 5;\r\n    private posX: number;\r\n    private posY: number;\r\n    private contE2 = [];\r\n    private contE3 = [];\r\n    protected onLoad(): void {\r\n        Enemy.instance = this;\r\n    }\r\n    start() {\r\n        let collider = this.getComponent(Collider2D);\r\n        if(collider){\r\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\r\n            collider.on(Contact2DType.END_CONTACT, this.onEndContact, this);\r\n        }\r\n        \r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        this.enemyMove();\r\n    }\r\n    destroyB(){\r\n        let destroyPrefab = this.destroyPre;\r\n        let prefabInstance = instantiate(destroyPrefab);\r\n        prefabInstance.parent = this.node;\r\n        prefabInstance.setWorldPosition(this.node.worldPosition);\r\n    }\r\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null){\r\n        AudioToggle.instance.onAudioQueue(7);\r\n\r\n        if(selfCollider.node.name.startsWith('enemy1')){\r\n            this.scheduleOnce(() => {selfCollider.node.destroy()});\r\n            this.scheduleOnce(() => {GameCtrl.instance.countPoint(100)});\r\n            \r\n        }\r\n        if(selfCollider.node.name.startsWith('enemy2')){\r\n            this.scheduleOnce(() => {this.contE2.push(otherCollider.node)});\r\n            if(this.contE2.length >= 1){\r\n                this.scheduleOnce(() => {selfCollider.node.destroy()});\r\n                this.scheduleOnce(() => {GameCtrl.instance.countPoint(100)});\r\n            }\r\n        }\r\n        if(selfCollider.node.name.startsWith('enemy3')){\r\n            this.scheduleOnce(() => {this.contE3.push(otherCollider.node)});\r\n            if(this.contE3.length >= 2 ){\r\n                this.scheduleOnce(() => {selfCollider.node.destroy()});\r\n                this.scheduleOnce(() => {GameCtrl.instance.countPoint(100)});\r\n            }\r\n        }\r\n    }\r\n    onEndContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null){\r\n\r\n    }\r\n    enemyMove(){\r\n        if(!ButtonPlayScene.instance.moveEnable) return;\r\n        switch(GameCtrl.instance.countElement){\r\n            case 0:\r\n                this.posX = this.node.position.x;\r\n                this.posY = this.node.position.y;\r\n    \r\n                this.posY -= this.bulletSpeed * 0.75;\r\n                let posBullet0 = new Vec3(this.posX, this.posY);\r\n                this.node.setPosition(posBullet0);\r\n                break;\r\n            case 1:\r\n                this.posX = this.node.position.x;\r\n                this.posY = this.node.position.y;\r\n    \r\n                this.posX += this.bulletSpeed * 0.75;\r\n                this.posY -= this.bulletSpeed * 0.5;\r\n                let posBullet1 = new Vec3(this.posX, this.posY);\r\n                this.node.setPosition(posBullet1);\r\n                break;\r\n            case 2:\r\n                this.posX = this.node.position.x;\r\n                this.posY = this.node.position.y;\r\n                \r\n                if(this.posY > 40){\r\n                this.posY -= this.bulletSpeed * 0.75;\r\n                }else{\r\n                this.posX += this.bulletSpeed ;\r\n                }\r\n                let posBullet2 = new Vec3(this.posX, this.posY);\r\n            this.node.setPosition(posBullet2);\r\n                break;\r\n            case 3:\r\n                this.posX = this.node.position.x;\r\n                this.posY = this.node.position.y;\r\n        \r\n                this.posX += this.bulletSpeed * 0.75;\r\n                let posBullet3 = new Vec3(this.posX, this.posY);\r\n                this.node.setPosition(posBullet3);\r\n                break;\r\n            case 4:\r\n                this.posX = this.node.position.x;\r\n                this.posY = this.node.position.y;\r\n                    \r\n                if(this.posY > 40){\r\n                    this.posY -= this.bulletSpeed * 0.75;\r\n                }else{\r\n                    this.posX -= this.bulletSpeed ;\r\n                }\r\n                let posBullet4 = new Vec3(this.posX, this.posY);\r\n                this.node.setPosition(posBullet4);\r\n                break;\r\n            case 5:\r\n                this.posX = this.node.position.x;\r\n                this.posY = this.node.position.y;\r\n        \r\n                if(this.posX < -360){\r\n                    this.posX += this.bulletSpeed * 0.75;\r\n                }else{\r\n                    this.posX += this.bulletSpeed * 0.75;\r\n                    this.posY -= this.bulletSpeed * 0.5;\r\n                }\r\n                let posBullet5 = new Vec3(this.posX, this.posY);\r\n                this.node.setPosition(posBullet5);\r\n                break;\r\n            case 6:\r\n                this.posX = this.node.position.x;\r\n                this.posY = this.node.position.y;\r\n        \r\n                \r\n                if(this.posY > 200){\r\n                    this.posY -= this.bulletSpeed * 0.75;\r\n                }else{return;}\r\n                let posBullet6 = new Vec3(this.posX, this.posY);\r\n                this.node.setPosition(posBullet6);\r\n                break;\r\n            case 7:\r\n                this.posX = this.node.position.x;\r\n                this.posY = this.node.position.y;\r\n        \r\n                this.posX -= this.bulletSpeed;\r\n                let posBullet7 = new Vec3(this.posX, this.posY);\r\n                this.node.setPosition(posBullet7);\r\n                break;\r\n            case 8:\r\n                this.posX = this.node.position.x;\r\n                this.posY = this.node.position.y;\r\n        \r\n                if(this.posX > 360){\r\n                    this.posX -= this.bulletSpeed * 0.75;\r\n                }else{\r\n                    this.posX -= this.bulletSpeed * 0.75;\r\n                    this.posY -= this.bulletSpeed * 0.5;\r\n                }\r\n                let posBullet8 = new Vec3(this.posX, this.posY);\r\n                this.node.setPosition(posBullet8);\r\n                break;\r\n            case 9:\r\n                this.posX = this.node.position.x;\r\n                this.posY = this.node.position.y;\r\n        \r\n                this.posX -= this.bulletSpeed * 0.75;\r\n                this.posY -= this.bulletSpeed * 0.5;\r\n                let posBullet9 = new Vec3(this.posX, this.posY);\r\n                this.node.setPosition(posBullet9);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}