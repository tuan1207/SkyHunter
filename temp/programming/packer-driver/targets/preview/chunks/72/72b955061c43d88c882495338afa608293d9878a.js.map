{"version":3,"sources":["file:///D:/Cocos%20Creator/Sky-Hunter/NewProject/assets/scripts/Enemy.ts"],"names":["_decorator","Component","tween","Vec3","Prefab","instantiate","Collider2D","Contact2DType","ccclass","property","Enemy","bulletSpeed","posX","node","parent","worldPosition","x","posY","y","start","collider","getComponent","on","BEGIN_CONTACT","onBeginContact","END_CONTACT","onEndContact","enemyMove","update","deltaTime","destroyB","destroyPrefab","destroyPre","prefabInstance","setWorldPosition","selfCollider","otherCollider","contact","name","endsWith","randomPosition","to","position","call"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAYC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,a,OAAAA,a;;;;;;;;;OAE9E;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;uBAGjBU,K,WADZF,OAAO,CAAC,OAAD,C,UAEHC,QAAQ,CAACL,MAAD,C,2BAFb,MACaM,KADb,SAC2BT,SAD3B,CACqC;AAAA;AAAA;;AAAA;;AAAA,eAI1BU,WAJ0B,GAIJ,GAJI;AAAA,eAKzBC,IALyB,GAKV,KAAKC,IAAL,CAAUC,MAAV,CAAiBC,aAAjB,CAA+BC,CALrB;AAAA,eAMzBC,IANyB,GAMV,KAAKJ,IAAL,CAAUC,MAAV,CAAiBC,aAAjB,CAA+BG,CANrB;AAAA;;AAOjCC,QAAAA,KAAK,GAAG;AACJ,cAAIC,QAAQ,GAAG,KAAKC,YAAL,CAAkBf,UAAlB,CAAf;;AACA,cAAGc,QAAH,EAAY;AACRA,YAAAA,QAAQ,CAACE,EAAT,CAAYf,aAAa,CAACgB,aAA1B,EAAyC,KAAKC,cAA9C,EAA8D,IAA9D;AACAJ,YAAAA,QAAQ,CAACE,EAAT,CAAYf,aAAa,CAACkB,WAA1B,EAAuC,KAAKC,YAA5C,EAA0D,IAA1D;AACH;;AACD,eAAKC,SAAL;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AACDC,QAAAA,QAAQ,GAAE;AACN,cAAIC,aAAa,GAAG,KAAKC,UAAzB;AACA,cAAIC,cAAc,GAAG5B,WAAW,CAAC0B,aAAD,CAAhC;AACAE,UAAAA,cAAc,CAACnB,MAAf,GAAwB,KAAKD,IAAL,CAAUC,MAAlC;AACAmB,UAAAA,cAAc,CAACC,gBAAf,CAAgC,KAAKrB,IAAL,CAAUE,aAA1C;AACH;;AACDS,QAAAA,cAAc,CAACW,YAAD,EAA2BC,aAA3B,EAAsDC,OAAtD,EAAwF,CAErG;;AACDX,QAAAA,YAAY,CAACS,YAAD,EAA2BC,aAA3B,EAAsDC,OAAtD,EAAwF,CAEnG;;AACDV,QAAAA,SAAS,GAAE;AACP,cAAG,KAAKd,IAAL,CAAUyB,IAAV,CAAeC,QAAf,CAAwB,IAAxB,CAAH,EAAiC;AAC7B;AACA;AAEA;AACA;AACA;AACA,gBAAIC,cAAc,GAAG,IAAIrC,IAAJ,CAAS,KAAKS,IAAd,EAAoB,KAAKK,IAAzB,CAArB;AACAf,YAAAA,KAAK,CAAC,KAAKW,IAAN,CAAL,CACK4B,EADL,CACQ,KAAK9B,WADb,EAC0B;AAAC+B,cAAAA,QAAQ,EAAEF;AAAX,aAD1B,EAEKG,IAFL,CAEU,MAAI;AACN,mBAAKhB,SAAL;AACH,aAJL,EAKKR,KALL;AAMH,WAfM,CAgBP;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AACH;;AAxHgC,O;;;;;iBAEL,I","sourcesContent":["import { _decorator, Component, tween, Vec3, Node, Prefab, instantiate, Collider2D, Contact2DType, IPhysics2DContact } from 'cc';\r\nimport { GameCtrl } from './GameCtrl';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Enemy')\r\nexport class Enemy extends Component {\r\n    @property(Prefab)\r\n    public destroyPre: Prefab = null;\r\n\r\n    public bulletSpeed: number = 2.5;\r\n    private posX: number = this.node.parent.worldPosition.x;\r\n    private posY: number = this.node.parent.worldPosition.y;\r\n    start() {\r\n        let collider = this.getComponent(Collider2D);\r\n        if(collider){\r\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\r\n            collider.on(Contact2DType.END_CONTACT, this.onEndContact, this);\r\n        }\r\n        this.enemyMove();\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n    destroyB(){\r\n        let destroyPrefab = this.destroyPre;\r\n        let prefabInstance = instantiate(destroyPrefab);\r\n        prefabInstance.parent = this.node.parent;\r\n        prefabInstance.setWorldPosition(this.node.worldPosition);\r\n    }\r\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null){\r\n        \r\n    }\r\n    onEndContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null){\r\n\r\n    }\r\n    enemyMove(){\r\n        if(this.node.name.endsWith('_0')){\r\n            // this.posX = this.node.position.x;\r\n            // this.posY = this.node.position.y;\r\n\r\n            // this.posY -= this.bulletSpeed;\r\n            // let posBullet = new Vec3(this.posX, this.posY);\r\n            // this.node.setPosition(posBullet);\r\n            let randomPosition = new Vec3(this.posX, this.posY);\r\n            tween(this.node)\r\n                .to(this.bulletSpeed, {position: randomPosition})\r\n                .call(()=>{\r\n                    this.enemyMove();\r\n                })\r\n                .start();\r\n        }\r\n        // if(this.node.name.endsWith('_1')){\r\n        //     let posX = this.node.position.x;\r\n        //     let posY = this.node.position.y;\r\n\r\n        //     posX += this.bulletSpeed;\r\n        //     // posY -= this.bulletSpeed * 0.5;\r\n        //     let posBullet = new Vec3(this.posX, this.posY);\r\n        //     this.node.setPosition(posBullet);\r\n        // }\r\n        // if(this.node.name.endsWith('_0')){\r\n        //     this.posX = this.node.position.x;\r\n        //     this.posY = this.node.position.y;\r\n\r\n        //     this.posY -= this.bulletSpeed;\r\n        //     let posBullet = new Vec3(this.posX, this.posY);\r\n        //     this.node.setPosition(posBullet);\r\n        // }\r\n        // if(this.node.name.endsWith('_0')){\r\n        //     this.posX = this.node.position.x;\r\n        //     this.posY = this.node.position.y;\r\n\r\n        //     this.posY -= this.bulletSpeed;\r\n        //     let posBullet = new Vec3(this.posX, this.posY);\r\n        //     this.node.setPosition(posBullet);\r\n        // }\r\n        // if(this.node.name.endsWith('_0')){\r\n        //     this.posX = this.node.position.x;\r\n        //     this.posY = this.node.position.y;\r\n\r\n        //     this.posY -= this.bulletSpeed;\r\n        //     let posBullet = new Vec3(this.posX, this.posY);\r\n        //     this.node.setPosition(posBullet);\r\n        // }\r\n        // if(this.node.name.endsWith('_0')){\r\n        //     this.posX = this.node.position.x;\r\n        //     this.posY = this.node.position.y;\r\n\r\n        //     this.posY -= this.bulletSpeed;\r\n        //     let posBullet = new Vec3(this.posX, this.posY);\r\n        //     this.node.setPosition(posBullet);\r\n        // }\r\n        // if(this.node.name.endsWith('_0')){\r\n        //     this.posX = this.node.position.x;\r\n        //     this.posY = this.node.position.y;\r\n\r\n        //     this.posY -= this.bulletSpeed;\r\n        //     let posBullet = new Vec3(this.posX, this.posY);\r\n        //     this.node.setPosition(posBullet);\r\n        // }\r\n        // if(this.node.name.endsWith('_0')){\r\n        //     this.posX = this.node.position.x;\r\n        //     this.posY = this.node.position.y;\r\n\r\n        //     this.posY -= this.bulletSpeed;\r\n        //     let posBullet = new Vec3(this.posX, this.posY);\r\n        //     this.node.setPosition(posBullet);\r\n        // }\r\n        // if(this.node.name.endsWith('_0')){\r\n        //     this.posX = this.node.position.x;\r\n        //     this.posY = this.node.position.y;\r\n\r\n        //     this.posY -= this.bulletSpeed;\r\n        //     let posBullet = new Vec3(this.posX, this.posY);\r\n        //     this.node.setPosition(posBullet);\r\n        // }\r\n        // if(this.node.name.endsWith('_0')){\r\n        //     this.posX = this.node.position.x;\r\n        //     this.posY = this.node.position.y;\r\n\r\n        //     this.posY -= this.bulletSpeed;\r\n        //     let posBullet = new Vec3(this.posX, this.posY);\r\n        //     this.node.setPosition(posBullet);\r\n        // }\r\n    }\r\n}\r\n\r\n\r\n"]}