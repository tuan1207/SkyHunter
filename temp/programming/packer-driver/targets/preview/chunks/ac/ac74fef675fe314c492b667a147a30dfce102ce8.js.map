{"version":3,"sources":["file:///D:/Cocos%20Creator/Sky-Hunter/NewProject/assets/scripts/Plane.ts"],"names":["_decorator","Component","instantiate","Node","input","Input","KeyCode","Vec3","Collider2D","Contact2DType","Animation","Prefab","macro","RigidBody2D","Vec2","GameCtrl","AudioToggle","ButtonPlayScene","ccclass","property","Plane","moveLeft","moveRight","moveUp","moveDown","moveEnable","moveSpeed","listItemB","listItemR","countCont","bulletVelos","onLoad","instance","on","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","schedule","spawnBullet","REPEAT_FOREVER","spawnRocket","onDestroy","off","start","collider","getComponent","BEGIN_CONTACT","onBeginContact","END_CONTACT","onEndContact","update","dt","planeMove","linearVelocity","event","keyCode","KEY_A","KEY_D","KEY_W","KEY_S","ARROW_LEFT","ARROW_RIGHT","ARROW_UP","ARROW_DOWN","posX","position","x","posY","y","posPlane","setPosition","selfCollider","otherCollider","contact","spawnEnabled","other","node","self","name","onAudioQueue","scheduleOnce","push","destroy","console","log","length","startsWith","planeAnim","play","group","setTimeout","bulletPrefab0","listBullet","prefabInstance","parent","bullet","setWorldPosition","worldPosition","z","i","bulletPrefab","prefabInstance0","prefabInstance1","checkHealth","listHealth","active","overNode","savePoint"],"mappings":"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","sourcesContent":["import { _decorator, Component, instantiate, Node, input, Input, EventKeyboard, KeyCode, Vec3, Collider2D, Contact2DType, IPhysics2DContact, EPhysics2DDrawFlags, Animation, Prefab, macro, RigidBody2D, Vec2 } from 'cc';\r\nimport { GameCtrl } from './GameCtrl';\r\nimport { AudioToggle } from './AudioToggle';\r\nimport { ButtonPlayScene } from './ButtonPlayScene';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Plane')\r\nexport class Plane extends Component {\r\n    static instance: Plane;\r\n\r\n    @property(Node)\r\n    public Plane: Node = null;\r\n    @property(Animation)\r\n    public planeAnim: Animation = null;\r\n    @property(Prefab)\r\n    public listBullet: Prefab [] = [];\r\n    @property(Node)\r\n    public listHealth: Node [] = [];\r\n    @property(Node)\r\n    public bullet: Node = null;;\r\n    \r\n\r\n    public moveLeft: boolean = false;\r\n    public moveRight: boolean = false;\r\n    public moveUp: boolean = false;\r\n    public moveDown: boolean = false;\r\n    public moveEnable: boolean = true;\r\n\r\n    public moveSpeed: number = 200;\r\n\r\n    public listItemB = [];\r\n    public listItemR = [];\r\n    public countCont = [];\r\n\r\n    bulletVelos = [\r\n        new Vec2(0, 20),\r\n        new Vec2(-1.5, 19),\r\n        new Vec2(1.5, 19),\r\n        new Vec2(-3, 18),\r\n        new Vec2(3, 18)\r\n    ];\r\n\r\n    protected onLoad(): void {\r\n        Plane.instance = this;\r\n        // PhysicsSystem2D.instance.enable = true;\r\n        // PhysicsSystem2D.instance.debugDrawFlags  = EPhysics2DDrawFlags.Aabb |\r\n        // EPhysics2DDrawFlags.Pair |\r\n        // EPhysics2DDrawFlags.CenterOfMass |\r\n        // EPhysics2DDrawFlags.Joint |\r\n        // EPhysics2DDrawFlags.Shape;\r\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        input.on(Input.EventType.KEY_UP, this.onKeyUp, this);\r\n\r\n        this.schedule(this.spawnBullet, 0.4, macro.REPEAT_FOREVER, 0);\r\n        this.schedule(this.spawnRocket, 0.7, macro.REPEAT_FOREVER, 0);\r\n    }\r\n    protected onDestroy(): void {\r\n        input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        input.off(Input.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n    protected start(): void {\r\n        let collider = this.getComponent(Collider2D);\r\n        if(collider){\r\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\r\n            collider.on(Contact2DType.END_CONTACT, this.onEndContact, this);\r\n        }\r\n    }\r\n    protected update(dt: number): void {\r\n        if(ButtonPlayScene.instance.moveEnable === false) return;\r\n        this.planeMove(dt);\r\n        this.Plane.getComponent(RigidBody2D).linearVelocity = new Vec2(0, 0);\r\n    }\r\n    onKeyDown(event: EventKeyboard){\r\n        if(!ButtonPlayScene.instance.moveEnable) return;\r\n        switch(event.keyCode){\r\n            case KeyCode.KEY_A: this.moveLeft = true; break;\r\n            case KeyCode.KEY_D: this.moveRight = true; break;\r\n            case KeyCode.KEY_W: this.moveUp = true; break;\r\n            case KeyCode.KEY_S: this.moveDown = true; break;\r\n\r\n            case KeyCode.ARROW_LEFT: this.moveLeft = true; break;\r\n            case KeyCode.ARROW_RIGHT: this.moveRight = true; break;\r\n            case KeyCode.ARROW_UP: this.moveUp = true; break;\r\n            case KeyCode.ARROW_DOWN: this.moveDown = true; break;\r\n\r\n        }\r\n    }\r\n    onKeyUp(event: EventKeyboard){\r\n        if(!ButtonPlayScene.instance.moveEnable) return;\r\n        switch(event.keyCode){\r\n            case KeyCode.KEY_A: this.moveLeft = false; break;\r\n            case KeyCode.KEY_D: this.moveRight = false; break;\r\n            case KeyCode.KEY_W: this.moveUp = false; break;\r\n            case KeyCode.KEY_S: this.moveDown = false; break;\r\n\r\n            case KeyCode.ARROW_LEFT: this.moveLeft = false; break;\r\n            case KeyCode.ARROW_RIGHT: this.moveRight = false; break;\r\n            case KeyCode.ARROW_UP: this.moveUp = false; break;\r\n            case KeyCode.ARROW_DOWN: this.moveDown = false; break;\r\n\r\n        }\r\n    }  \r\n    planeMove(dt: number){\r\n        let posX = this.Plane.position.x;\r\n        let posY = this.Plane.position.y;\r\n\r\n        if(this.moveLeft){\r\n            if(posX > -575){\r\n                posX -= this.moveSpeed * dt;\r\n            }\r\n            let posPlane = new Vec3(posX, posY);\r\n            this.Plane.setPosition(posPlane);\r\n        }\r\n        if(this.moveRight){\r\n            if(posX < 575){\r\n                posX += this.moveSpeed * dt;\r\n            }\r\n            let posPlane = new Vec3(posX, posY);\r\n            this.Plane.setPosition(posPlane);\r\n        }\r\n        if(this.moveUp){\r\n            if(posY < 340){\r\n                posY += this.moveSpeed * dt;\r\n            }\r\n            let posPlane = new Vec3(posX, posY);\r\n            this.Plane.setPosition(posPlane); \r\n        }\r\n        if(this.moveDown){\r\n            if(posY > -340){\r\n                posY -= this.moveSpeed * dt;\r\n            }\r\n            let posPlane = new Vec3(posX, posY);\r\n            this.Plane.setPosition(posPlane); \r\n        }\r\n    }\r\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null){\r\n        if(!ButtonPlayScene.instance.spawnEnabled) {\r\n            return;\r\n        }\r\n        let other = otherCollider.node;\r\n        let self = selfCollider.node;\r\n        if(other.name === 'ItemB'){\r\n            AudioToggle.instance.onAudioQueue(3);\r\n            this.scheduleOnce(() => {this.listItemB.push(other)});\r\n            this.scheduleOnce(() => {other.destroy()});\r\n            console.log(this.listItemB.length);\r\n        }\r\n        if(other.name === 'ItemR'){\r\n            AudioToggle.instance.onAudioQueue(3);\r\n            this.scheduleOnce(() => {this.listItemR.push(other)});\r\n            this.scheduleOnce(() => {other.destroy()});\r\n            console.log(this.listItemR.length);\r\n        }\r\n        if(other.name.startsWith('enemy')){\r\n            AudioToggle.instance.onAudioQueue(7);\r\n            // this.scheduleOnce(() => {this.listItemR = []});\r\n            // this.scheduleOnce(() => {this.listItemB = []});\r\n            this.scheduleOnce(() => {other.destroy()});\r\n            this.planeAnim.play();\r\n            selfCollider.group = 32;\r\n            setTimeout(() => {\r\n            selfCollider.group = 1;}, 4000);  \r\n            // this.scheduleOnce(() => {this.countCont.push(other)});\r\n            // this.scheduleOnce(() => this.checkHealth());\r\n        }\r\n        if(other.name.startsWith('Laser')){\r\n            // this.scheduleOnce(() => {this.listItemR = []});\r\n            // this.scheduleOnce(() => {this.listItemB = []});\r\n            this.planeAnim.play();\r\n            selfCollider.group = 32;\r\n            setTimeout(() => {\r\n                selfCollider.group = 1;}, 4000);   \r\n            // this.scheduleOnce(() => {this.countCont.push(other)});\r\n            // this.scheduleOnce(() => this.checkHealth());\r\n        }\r\n    }\r\n    onEndContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null){\r\n\r\n    }\r\n    spawnBullet(){\r\n        if(!ButtonPlayScene.instance.spawnEnabled) return;\r\n        if(this.listItemB.length === 0){\r\n            let bulletPrefab0 = this.listBullet[0];\r\n            let prefabInstance = instantiate(bulletPrefab0);\r\n            prefabInstance.getComponent(RigidBody2D).linearVelocity = this.bulletVelos[0];\r\n            prefabInstance.parent = this.bullet;\r\n            prefabInstance.setWorldPosition(this.node.worldPosition.x, this.node.worldPosition.y+60, this.node.worldPosition.z);\r\n        }\r\n        if(this.listItemB.length === 1){\r\n             \r\n            for(let i = 0; i < 3; i++) {\r\n                let bulletPrefab0 = this.listBullet[0];\r\n                let prefabInstance = instantiate(bulletPrefab0);\r\n                prefabInstance.getComponent(RigidBody2D).linearVelocity = this.bulletVelos[i];\r\n                prefabInstance.parent = this.bullet;\r\n                prefabInstance.setWorldPosition(this.node.worldPosition.x, this.node.worldPosition.y+60, this.node.worldPosition.z);\r\n            }\r\n        }\r\n        if(this.listItemB.length >= 2){\r\n            for(let i = 0; i < 5; i++){\r\n                let bulletPrefab0 = this.listBullet[0];\r\n                let prefabInstance = instantiate(bulletPrefab0);\r\n                prefabInstance.getComponent(RigidBody2D).linearVelocity = this.bulletVelos[i];\r\n                prefabInstance.parent = this.bullet;\r\n                prefabInstance.setWorldPosition(this.node.worldPosition.x, this.node.worldPosition.y+60, this.node.worldPosition.z);\r\n            }\r\n        }\r\n    }\r\n    spawnRocket(){\r\n        if(!ButtonPlayScene.instance.spawnEnabled) return;\r\n        if(this.listItemR.length >= 1){\r\n            let bulletPrefab = this.listBullet[1];\r\n\r\n            let prefabInstance0 = instantiate(bulletPrefab);\r\n            prefabInstance0.parent = this.bullet;\r\n            prefabInstance0.getComponent(RigidBody2D).linearVelocity = this.bulletVelos[0];\r\n            prefabInstance0.setWorldPosition(this.node.worldPosition.x+50, this.node.worldPosition.y, this.node.worldPosition.z);\r\n\r\n            let prefabInstance1 = instantiate(bulletPrefab);\r\n            prefabInstance1.parent = this.bullet;\r\n            prefabInstance1.getComponent(RigidBody2D).linearVelocity = this.bulletVelos[0];\r\n            prefabInstance1.setWorldPosition(this.node.worldPosition.x-50, this.node.worldPosition.y, this.node.worldPosition.z);\r\n        }\r\n    }\r\n    checkHealth(){\r\n        if(this.countCont.length === 1){\r\n            this.listHealth[4].active = false;\r\n        }\r\n        if(this.countCont.length === 2){\r\n            this.listHealth[3].active = false;\r\n        }\r\n        if(this.countCont.length === 3){\r\n            this.listHealth[2].active = false;\r\n        }\r\n        if(this.countCont.length === 4){\r\n            this.listHealth[1].active = false;\r\n        }\r\n        if(this.countCont.length === 5){\r\n            this.listHealth[0].active = false;\r\n            ButtonPlayScene.instance.moveEnable = false;        \r\n            ButtonPlayScene.instance.spawnEnabled = false;\r\n            GameCtrl.instance.overNode.setWorldPosition(GameCtrl.instance.node.worldPosition);\r\n            GameCtrl.instance.overNode.active = true;\r\n            GameCtrl.instance.savePoint();\r\n        }\r\n    }\r\n    \r\n}\r\n"]}