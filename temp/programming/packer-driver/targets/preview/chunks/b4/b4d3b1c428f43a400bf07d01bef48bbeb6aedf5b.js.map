{"version":3,"sources":["file:///D:/Cocos%20Creator/Sky-Hunter/NewProject/assets/scripts/Boss.ts"],"names":["_decorator","Component","Collider2D","Contact2DType","math","Vec3","tween","Prefab","instantiate","macro","ccclass","property","Boss","randomPosition","start","collider","getComponent","on","BEGIN_CONTACT","onBeginContact","END_CONTACT","onEndContact","moveRandom","schedule","spawnBullet","REPEAT_FOREVER","update","deltaTime","randomX","random","randomY","distance","node","position","duration","speed","to","call","selfCollider","otherCollider","contact","other","self","name","i","listBulletB1","length","enemyPre","prefabInstance","parent","setWorldPosition","worldPosition"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Collider2D, Contact2DType, math, Vec3, tween, IPhysics2DContact, Prefab, instantiate, macro, Animation } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Boss')\r\nexport class Boss extends Component {\r\n    @property(Prefab)\r\n    public listBulletB1: Prefab [] = [];\r\n    @property(Prefab)\r\n    public listBulletB3: Prefab [] = [];\r\n    // @property(Animation)\r\n    // public laserBullet: Animation = null;\r\n    @property\r\n    speed: number = 100;\r\n    public randomPosition;\r\n    start() {\r\n        let collider = this.getComponent(Collider2D);\r\n        if (collider) {\r\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\r\n            collider.on(Contact2DType.END_CONTACT, this.onEndContact, this);\r\n        }\r\n        this.moveRandom();\r\n        this.schedule(this.spawnBullet, 2.5, macro.REPEAT_FOREVER, 0);\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n    moveRandom() {\r\n        const randomX = math.random() * (0 - 1000) + 500;\r\n        const randomY = math.random() * (200 - 600) + 200;\r\n        this.randomPosition = new Vec3(randomX, randomY);\r\n\r\n        const distance = Vec3.distance(this.node.position, this.randomPosition);\r\n        const duration = distance / this.speed;\r\n\r\n        tween(this.node)\r\n            .to(duration, { position: this.randomPosition })\r\n            .call(() => {\r\n                this.moveRandom();\r\n            })\r\n            .start();\r\n    }\r\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null){\r\n        let other = otherCollider.node;\r\n        let self = selfCollider.node;\r\n    }\r\n    onEndContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null){\r\n\r\n    }\r\n    spawnBullet(){\r\n        if(this.node.name === 'boss001'){\r\n            for(let i = 0; i < this.listBulletB1.length; i++){\r\n            let enemyPre = this.listBulletB1[i];\r\n            let prefabInstance = instantiate(enemyPre);\r\n            prefabInstance.parent = this.node.parent;\r\n            prefabInstance.setWorldPosition(this.node.worldPosition);\r\n            }\r\n        }\r\n        if(this.node.name === 'boss002'){\r\n\r\n        }\r\n        \r\n    }\r\n}\r\n\r\n\r\n"]}