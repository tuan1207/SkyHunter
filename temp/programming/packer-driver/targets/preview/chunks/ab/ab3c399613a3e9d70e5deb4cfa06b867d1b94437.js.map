{"version":3,"sources":["file:///D:/Cocos%20Creator/Sky-Hunter/NewProject/assets/scripts/GameCtrl.ts"],"names":["_decorator","Component","Node","Prefab","Vec3","instantiate","macro","Label","ProgressBar","sys","NodePool","RigidBody2D","Vec2","ButtonPlayScene","ccclass","property","GameCtrl","destroyCount","highPoint","countElement","objectPool","spawnEnable","checkTurn1","listPos","onLoad","instance","schedule","spawnTurn1","spawnObject","REPEAT_FOREVER","update","dt","countEle","spawnEnabled","console","log","scheduleOnce","bulletPrefab0","enemyWave1","j","prefabInstance","parent","node","setWorldPosition","x","y","z","spawnBoss1","spawnTurn2","enemyWave2","spawnBoss2","spawnTurn3","enemyWave3","spawnBoss3","enemyPre","listBoss","healthBar","active","progress","object","get","helicop","getComponent","linearVelocity","addChild","countPoint","point","countPointLb","string","overPointLb","savePoint","storedHighPoint","parseInt","localStorage","getItem","isNaN","setItem","toString","highPointLb"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Prefab, Vec3, instantiate, macro, Label, ProgressBar, System, sys, Pool, NodePool, RigidBody2D, Vec2, tween } from 'cc';\r\nimport { Plane } from './Plane';\r\nimport { ButtonPlayScene } from './ButtonPlayScene';\r\nimport { Boss } from './Boss';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GameCtrl')\r\nexport class GameCtrl extends Component {\r\n    static instance: GameCtrl;\r\n\r\n    @property(Prefab)\r\n    public enemyWave1: Prefab = null;\r\n    @property(Prefab)\r\n    public enemyWave2: Prefab = null;\r\n    @property(Prefab)\r\n    public enemyWave3: Prefab = null;\r\n    @property(Prefab)\r\n    public listBoss: Prefab [] = [];\r\n    @property(Prefab)\r\n    public helicop: Prefab = null;\r\n\r\n    @property(Node)\r\n    public overNode: Node = null;\r\n\r\n    @property(Label)\r\n    public countPointLb: Label;\r\n    @property(Label)\r\n    public overPointLb: Label;\r\n    @property(Label)\r\n    public highPointLb: Label;\r\n\r\n    @property(ProgressBar)\r\n    public healthBar: ProgressBar = null;\r\n\r\n    public destroyCount: number = 0;\r\n    public highPoint: number = 0;\r\n    public countElement: number = 1;\r\n\r\n    private objectPool: NodePool;\r\n    \r\n    public spawnEnable: boolean = true;\r\n    public checkTurn1: boolean = true;\r\n    listPos = [\r\n        new Vec3(640, 760, -1), //turn 1, 3, 5, 7\r\n        new Vec3(-50, 760, -1), //turn 2\r\n        new Vec3(-100, 560, -1),//turn 4\r\n        new Vec3(-50, 270, -1), //turn 6\r\n        new Vec3(1330, 560, -1),//turn 8\r\n        new Vec3(1330, 270, -1),//turn 9\r\n        new Vec3(1330, 760, -1),//turn 10\r\n        new Vec3(640, 500, -1)  //turn boss\r\n    ];\r\n    protected onLoad(): void {\r\n        GameCtrl.instance = this;\r\n        this.schedule(this.spawnTurn1, 7, 9, 0);\r\n        this.schedule(this.spawnObject, 2, macro.REPEAT_FOREVER, 0);\r\n        this.objectPool = new NodePool();\r\n    }\r\n    protected update(dt: number): void {\r\n    }\r\n    countEle(){\r\n        if(this.countElement === 10){\r\n            this.countElement = 1;\r\n            return;\r\n        }\r\n        this.countElement++;\r\n    }\r\n    spawnTurn1(){\r\n        if(!ButtonPlayScene.instance.spawnEnabled) return;\r\n        console.log('bat dau spawn');\r\n        this.scheduleOnce(() => {this.countEle()}); \r\n        let bulletPrefab0 = this.enemyWave1;\r\n        for(let j = 0; j < 5; j++){\r\n            let prefabInstance = instantiate(bulletPrefab0);\r\n            prefabInstance.parent = this.node;\r\n            switch(this.countElement){    \r\n                case 1:\r\n                    prefabInstance.setWorldPosition(this.listPos[1].x - (100 * (0 + j)), this.listPos[1].y + (60 * (j + 1)), this.listPos[0].z);\r\n                    break;\r\n                case 2:\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x, this.listPos[0].y + (120 * (0 + j)), this.listPos[0].z);\r\n                    break;\r\n                case 3:\r\n                    prefabInstance.setWorldPosition(this.listPos[2].x + (140 * (j - 2)), this.listPos[2].y, this.listPos[2].z);\r\n                    break;\r\n                case 4:\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x, this.listPos[0].y + (120 * (0 + j)), this.listPos[0].z);\r\n                    break;\r\n                case 5:\r\n                    prefabInstance.setWorldPosition(this.listPos[3].x + (140 * (j - 2)), this.listPos[3].y, this.listPos[3].z);\r\n                    break;\r\n                case 6:\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x + (120 * (j - 2)), this.listPos[0].y, this.listPos[0].z);\r\n                    break;\r\n                case 7:\r\n                    prefabInstance.setWorldPosition(this.listPos[4].x + (140 * (j - 2)), this.listPos[4].y, this.listPos[4].z);\r\n                    break;\r\n                case 8:\r\n                    prefabInstance.setWorldPosition(this.listPos[5].x + (140 * (j - 2)), this.listPos[5].y, this.listPos[5].z);\r\n                    break;\r\n                case 9:\r\n                    prefabInstance.setWorldPosition(this.listPos[6].x + (100 * (0 + j)), this.listPos[6].y + (60 * (j + 1)), this.listPos[6].z);\r\n                    break;\r\n                case 10:\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x + (120 * (j - 2)), this.listPos[0].y, this.listPos[0].z);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        if(this.countElement === 10){\r\n            this.scheduleOnce(()=> {this.spawnBoss1()}, 5);\r\n        }\r\n\r\n    }\r\n    spawnTurn2(){\r\n        if(!ButtonPlayScene.instance.spawnEnabled) return;\r\n        console.log('bat dau spawn');\r\n        this.scheduleOnce(() => {this.countEle()}); \r\n        let bulletPrefab0 = this.enemyWave2;\r\n        for(let j = 0; j < 5; j++){\r\n            let prefabInstance = instantiate(bulletPrefab0);\r\n            prefabInstance.parent = this.node;\r\n            switch(this.countElement){\r\n                \r\n                case 1:\r\n                    prefabInstance.setWorldPosition(this.listPos[1].x - (100 * (0 + j)), this.listPos[1].y + (60 * (j + 1)), this.listPos[0].z);\r\n                    break;\r\n                case 2:\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x, this.listPos[0].y + (120 * (0 + j)), this.listPos[0].z);\r\n                    break;\r\n                case 3:\r\n                    prefabInstance.setWorldPosition(this.listPos[2].x + (140 * (j - 2)), this.listPos[2].y, this.listPos[2].z);\r\n                    break;\r\n                case 4:\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x, this.listPos[0].y + (120 * (0 + j)), this.listPos[0].z);\r\n                    break;\r\n                case 5:\r\n                    prefabInstance.setWorldPosition(this.listPos[3].x + (140 * (j - 2)), this.listPos[3].y, this.listPos[3].z);\r\n                    break;\r\n                case 6:\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x + (120 * (j - 2)), this.listPos[0].y, this.listPos[0].z);\r\n                    break;\r\n                case 7:\r\n                    prefabInstance.setWorldPosition(this.listPos[4].x + (140 * (j - 2)), this.listPos[4].y, this.listPos[4].z);\r\n                    break;\r\n                case 8:\r\n                    prefabInstance.setWorldPosition(this.listPos[5].x + (140 * (j - 2)), this.listPos[5].y, this.listPos[5].z);\r\n                    break;\r\n                case 9:\r\n                    prefabInstance.setWorldPosition(this.listPos[6].x + (100 * (0 + j)), this.listPos[6].y + (60 * (j + 1)), this.listPos[6].z);\r\n                    break;\r\n                case 10:\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x + (120 * (j - 2)), this.listPos[0].y, this.listPos[0].z);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        if(this.countElement === 10){\r\n            this.scheduleOnce(()=> {this.spawnBoss2()}, 5);\r\n        }\r\n    }\r\n    spawnTurn3(){\r\n        if(!ButtonPlayScene.instance.spawnEnabled) return;\r\n        console.log('bat dau spawn');\r\n        this.scheduleOnce(() => {this.countEle()}); \r\n        let bulletPrefab0 = this.enemyWave3;\r\n        for(let j = 0; j < 5; j++){\r\n            let prefabInstance = instantiate(bulletPrefab0);\r\n            prefabInstance.parent = this.node;\r\n            switch(this.countElement){\r\n                \r\n                case 1:\r\n                    prefabInstance.setWorldPosition(this.listPos[1].x - (100 * (0 + j)), this.listPos[1].y + (60 * (j + 1)), this.listPos[0].z);\r\n                    break;\r\n                case 2:\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x, this.listPos[0].y + (120 * (0 + j)), this.listPos[0].z);\r\n                    break;\r\n                case 3:\r\n                    prefabInstance.setWorldPosition(this.listPos[2].x + (140 * (j - 2)), this.listPos[2].y, this.listPos[2].z);\r\n                    break;\r\n                case 4:\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x, this.listPos[0].y + (120 * (0 + j)), this.listPos[0].z);\r\n                    break;\r\n                case 5:\r\n                    prefabInstance.setWorldPosition(this.listPos[3].x + (140 * (j - 2)), this.listPos[3].y, this.listPos[3].z);\r\n                    break;\r\n                case 6:\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x + (120 * (j - 2)), this.listPos[0].y, this.listPos[0].z);\r\n                    break;\r\n                case 7:\r\n                    prefabInstance.setWorldPosition(this.listPos[4].x + (140 * (j - 2)), this.listPos[4].y, this.listPos[4].z);\r\n                    break;\r\n                case 8:\r\n                    prefabInstance.setWorldPosition(this.listPos[5].x + (140 * (j - 2)), this.listPos[5].y, this.listPos[5].z);\r\n                    break;\r\n                case 9:\r\n                    prefabInstance.setWorldPosition(this.listPos[6].x + (100 * (0 + j)), this.listPos[6].y + (60 * (j + 1)), this.listPos[6].z);\r\n                    break;\r\n                case 0:\r\n                    prefabInstance.setWorldPosition(this.listPos[0].x + (120 * (j - 2)), this.listPos[0].y, this.listPos[0].z);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        if(this.countElement === 10){\r\n            this.scheduleOnce(()=> {this.spawnBoss3()}, 5);\r\n        }\r\n    }\r\n    spawnBoss1(){\r\n        console.log('da spawn');\r\n        let enemyPre = this.listBoss[0];\r\n        this.healthBar.node.active = true;\r\n        this.healthBar.progress = 1;\r\n        let prefabInstance = instantiate(enemyPre);\r\n        prefabInstance.parent = this.node;\r\n        prefabInstance.setWorldPosition(this.listPos[7]);\r\n    }\r\n    spawnBoss2(){\r\n        let enemyPre = this.listBoss[1];\r\n        this.healthBar.node.active = true;\r\n        this.healthBar.progress = 1;\r\n        let prefabInstance = instantiate(enemyPre);\r\n        prefabInstance.parent = this.node;\r\n        prefabInstance.setWorldPosition(this.listPos[7]);\r\n    }\r\n    spawnBoss3(){\r\n        let enemyPre = this.listBoss[2];\r\n        this.healthBar.node.active = true;\r\n        this.healthBar.progress = 1;\r\n        let prefabInstance = instantiate(enemyPre);\r\n        prefabInstance.parent = this.node;\r\n        prefabInstance.setWorldPosition(this.listPos[7]);\r\n    }\r\n    spawnObject() {\r\n        if(!ButtonPlayScene.instance.spawnEnabled) return;\r\n        let object = this.objectPool.get();\r\n        if (!object) {\r\n            object = instantiate(this.helicop);\r\n            object.getComponent(RigidBody2D).linearVelocity = new Vec2(0, 0);\r\n        }\r\n        object.parent = this.node;\r\n        object.setWorldPosition(0, 500, 0);\r\n        this.node.addChild(object);\r\n    }\r\n    countPoint(point: number){\r\n        this.destroyCount += point;\r\n        this.countPointLb.string = `${this.destroyCount}`;\r\n        this.overPointLb.string = `${this.destroyCount}`;\r\n    }\r\n    savePoint() {\r\n        this.overPointLb.string = `${this.destroyCount}`;\r\n\r\n        let storedHighPoint = parseInt(sys.localStorage.getItem('highPoint'));\r\n        if (!isNaN(storedHighPoint)) {\r\n            this.highPoint = storedHighPoint;\r\n        }\r\n\r\n        if (this.destroyCount > this.highPoint) {\r\n            this.highPoint = this.destroyCount;\r\n            sys.localStorage.setItem('highPoint', this.highPoint.toString());\r\n        }\r\n\r\n        this.highPointLb.string = `${this.highPoint}`;\r\n    }\r\n}\r\n\r\n\r\n"]}