{"version":3,"sources":["file:///D:/Cocos%20Creator/Sky-Hunter/NewProject/assets/scripts/JoyStick.ts"],"names":["_decorator","Component","Node","UITransform","Vec3","ccclass","property","JoyStick","start","update","deltaTime","onLoad","Stick","setPosition","node","on","EventType","TOUCH_START","onStickStart","TOUCH_MOVE","onStickMove","TOUCH_END","onStickEnd","TOUCH_CANCEL","event","wp","touch","getUILocation","Pos","getComponent","convertToNodeSpaceAR","x","y","active"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAuBC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;;;;;;;;;OACzD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;0BAGjBO,Q,WADZF,OAAO,CAAC,UAAD,C,UAEHC,QAAQ,CAACJ,IAAD,C,2BAFb,MACaK,QADb,SAC8BN,SAD9B,CACwC;AAAA;AAAA;;AAAA;AAAA;;AAGpCO,QAAAA,KAAK,GAAG,CAEP;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AACSC,QAAAA,MAAM,GAAS;AACrB,eAAKC,KAAL,CAAWC,WAAX,CAAuB,IAAIT,IAAJ,CAAS,CAAT,EAAY,CAAZ,CAAvB;AACA,eAAKU,IAAL,CAAUC,EAAV,CAAab,IAAI,CAACc,SAAL,CAAeC,WAA5B,EAAyC,KAAKC,YAA9C,EAA4D,IAA5D;AACA,eAAKJ,IAAL,CAAUC,EAAV,CAAab,IAAI,CAACc,SAAL,CAAeG,UAA5B,EAAwC,KAAKC,WAA7C,EAA0D,IAA1D;AACA,eAAKN,IAAL,CAAUC,EAAV,CAAab,IAAI,CAACc,SAAL,CAAeK,SAA5B,EAAuC,KAAKC,UAA5C,EAAwD,IAAxD;AACA,eAAKR,IAAL,CAAUC,EAAV,CAAab,IAAI,CAACc,SAAL,CAAeO,YAA5B,EAA0C,KAAKD,UAA/C,EAA2D,IAA3D;AACH;;AACDJ,QAAAA,YAAY,CAACM,KAAD,EAAmB;AAC3B,cAAIC,EAAE,GAAGD,KAAK,CAACE,KAAN,CAAYC,aAAZ,EAAT;AACA,cAAIC,GAAG,GAAG,KAAKd,IAAL,CAAUe,YAAV,CAAuB1B,WAAvB,EAAoC2B,oBAApC,CAAyD,IAAI1B,IAAJ,CAASqB,EAAE,CAACM,CAAZ,EAAeN,EAAE,CAACO,CAAlB,CAAzD,CAAV;AACA,eAAKlB,IAAL,CAAUmB,MAAV,GAAmB,IAAnB;AACA,eAAKrB,KAAL,CAAWC,WAAX,CAAuBe,GAAvB;AACH;;AACDR,QAAAA,WAAW,CAACI,KAAD,EAAmB;AAC1B,cAAIC,EAAE,GAAGD,KAAK,CAACE,KAAN,CAAYC,aAAZ,EAAT;AACA,cAAIC,GAAG,GAAG,KAAKd,IAAL,CAAUe,YAAV,CAAuB1B,WAAvB,EAAoC2B,oBAApC,CAAyD,IAAI1B,IAAJ,CAASqB,EAAE,CAACM,CAAZ,EAAeN,EAAE,CAACO,CAAlB,CAAzD,CAAV;AACA,eAAKpB,KAAL,CAAWC,WAAX,CAAuBe,GAAvB;AACH;;AACDN,QAAAA,UAAU,CAACE,KAAD,EAAmB;AACzB,eAAKZ,KAAL,CAAWC,WAAX,CAAuB,IAAIT,IAAJ,CAAS,CAAT,EAAY,CAAZ,CAAvB;AACH;;AA9BmC,O;;;;;iBAEf,I","sourcesContent":["import { _decorator, Component, EventTouch, Node, UITransform, Vec3 } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('JoyStick')\r\nexport class JoyStick extends Component {\r\n    @property(Node)\r\n    public Stick: Node = null;\r\n    start() {\r\n\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n    protected onLoad(): void {\r\n        this.Stick.setPosition(new Vec3(0, 0));\r\n        this.node.on(Node.EventType.TOUCH_START, this.onStickStart, this);\r\n        this.node.on(Node.EventType.TOUCH_MOVE, this.onStickMove, this);\r\n        this.node.on(Node.EventType.TOUCH_END, this.onStickEnd, this);\r\n        this.node.on(Node.EventType.TOUCH_CANCEL, this.onStickEnd, this);\r\n    }\r\n    onStickStart(event: EventTouch){\r\n        let wp = event.touch.getUILocation();\r\n        let Pos = this.node.getComponent(UITransform).convertToNodeSpaceAR(new Vec3(wp.x, wp.y));\r\n        this.node.active = true;\r\n        this.Stick.setPosition(Pos);\r\n    }\r\n    onStickMove(event: EventTouch){\r\n        let wp = event.touch.getUILocation();\r\n        let Pos = this.node.getComponent(UITransform).convertToNodeSpaceAR(new Vec3(wp.x, wp.y));\r\n        this.Stick.setPosition(Pos);\r\n    }\r\n    onStickEnd(event: EventTouch){\r\n        this.Stick.setPosition(new Vec3(0, 0));\r\n    }\r\n}\r\n\r\n\r\n"]}