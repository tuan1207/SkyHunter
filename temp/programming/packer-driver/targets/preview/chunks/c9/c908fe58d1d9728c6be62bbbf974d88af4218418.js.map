{"version":3,"sources":["file:///D:/Cocos%20Creator/Sky-Hunter/NewProject/assets/scripts/Boss.ts"],"names":["_decorator","Component","Collider2D","Contact2DType","math","Vec3","Prefab","instantiate","macro","Animation","RigidBody2D","Vec2","GameCtrl","AudioToggle","ButtonPlayScene","ccclass","property","Boss","bulletCont1","bulletCont2","bulletCont3","maxHealth1","currentHealth1","maxHealth2","currentHealth2","maxHealth3","currentHealth3","randomX","randomY","randomPosition","ZERO","bulletVelos","start","collider","getComponent","on","BEGIN_CONTACT","onBeginContact","END_CONTACT","onEndContact","schedule","spawnBullet","REPEAT_FOREVER","randomPos","onLoad","instance","update","dt","moveEnable","direction","clone","subtract","node","position","normalize","distance","posX","x","posY","y","setPosition","random","selfCollider","otherCollider","contact","onAudioQueue","name","scheduleOnce","push","healthBar","progress","length","countPoint","active","destroy","spawnTurn2","spawnBoss2","spawnTurn3","spawnBoss3","spawnTurn1","spawnBoss1","startsWith","spawnEnabled","i","enemyPre","listBulletB1","prefabInstance","linearVelocity","parent","setWorldPosition","worldPosition","listBulletB3","j","endsWith","z"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Collider2D, Contact2DType, math, Vec3, tween, IPhysics2DContact, Prefab, instantiate, macro, Animation, Scene, RigidBody2D, Vec2 } from 'cc';\r\nimport { GameCtrl } from './GameCtrl';\r\nimport { Plane } from './Plane';\r\nimport { AudioToggle } from './AudioToggle';\r\nimport { ButtonPlayScene } from './ButtonPlayScene';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Boss')\r\nexport class Boss extends Component {\r\n    static instance: Boss;\r\n    @property(Prefab)\r\n    public listBulletB1: Prefab [] = [];\r\n    @property(Prefab)\r\n    public listBulletB3: Prefab [] = [];\r\n    @property(Animation)\r\n    public laserBullet: Animation = null;\r\n    @property\r\n    speed: number = 100;\r\n    public bulletCont1 = [];\r\n    public bulletCont2 = [];\r\n    public bulletCont3 = [];\r\n    public maxHealth1: number = 50;\r\n    public currentHealth1: number = 50;\r\n    public maxHealth2: number = 100;\r\n    public currentHealth2: number = 100;\r\n    public maxHealth3: number = 150;\r\n    public currentHealth3: number = 150;  \r\n    public randomX: number;\r\n    public randomY: number;\r\n    public randomPosition: Vec3 = Vec3.ZERO;\r\n    bulletVelos = [\r\n        new Vec2(0, 20),//1\r\n        new Vec2(10, 20),\r\n        new Vec2(20, 20),//2\r\n        new Vec2(20, 10),\r\n        new Vec2(20, 0),//3\r\n        new Vec2 (20, -10),\r\n        new Vec2(20, -20),//4\r\n        new Vec2 (10, -20),\r\n        new Vec2(0, -20),//5\r\n        new Vec2(-20, -10),\r\n        new Vec2(-20, -20),//6\r\n        new Vec2 (-10, -20),\r\n        new Vec2(-20, 0),//7\r\n        new Vec2 (-20, 10),\r\n        new Vec2(-20, 20),//8\r\n        new Vec2 (-10, 20)\r\n    ];\r\n    start() {\r\n        let collider = this.getComponent(Collider2D);\r\n        if (collider) {\r\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\r\n            collider.on(Contact2DType.END_CONTACT, this.onEndContact, this);\r\n        }\r\n        this.schedule(this.spawnBullet, 2.5, macro.REPEAT_FOREVER, 0);\r\n        this.randomPos();\r\n    }\r\n    protected onLoad(): void {\r\n        Boss.instance = this;\r\n        \r\n        \r\n    }\r\n    update(dt: number) {\r\n        if (!ButtonPlayScene.instance.moveEnable) {\r\n            return;\r\n        }\r\n        let direction = this.randomPosition.clone().subtract(this.node.position).normalize();\r\n        let distance = math.Vec3.distance(this.node.position, this.randomPosition);\r\n        let posX = this.node.position.x + direction.x * distance * 0.01;\r\n        let posY = this.node.position.y + direction.y * distance * 0.01;\r\n        this.node.setPosition(new Vec3(posX, posY));\r\n        if (distance <= 50) {\r\n            this.randomPos();   \r\n        }\r\n    }\r\n\r\n    randomPos(){\r\n        this.randomX = math.random() * (0 - 1000) + 500;\r\n        this.randomY = math.random() * (200 - 600) + 200;\r\n        this.randomPosition = new Vec3(this.randomX, this.randomY);        \r\n    }\r\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null){\r\n        AudioToggle.instance.onAudioQueue(7);\r\n\r\n        if(otherCollider.node.name === 'bullet0' || otherCollider.node.name === 'rocket'){\r\n            if(this.node.name === 'boss001'){\r\n                this.scheduleOnce(() => {this.bulletCont1.push(otherCollider)});\r\n                this.currentHealth1 -= 1;\r\n                if (this.currentHealth1 <= 0) {\r\n                    this.currentHealth1 = 0;\r\n                }\r\n                GameCtrl.instance.healthBar.progress = this.currentHealth1 / this.maxHealth1;\r\n                if(this.bulletCont1.length >= 50){   \r\n                    this.scheduleOnce(() => {GameCtrl.instance.countPoint(1000)});\r\n                    GameCtrl.instance.healthBar.node.active = false;      \r\n                    this.scheduleOnce(() => {selfCollider.node.destroy()});\r\n                    GameCtrl.instance.schedule(GameCtrl.instance.spawnTurn2, 7, 9, 0);\r\n                    GameCtrl.instance.scheduleOnce(()=> {GameCtrl.instance.spawnBoss2()}, 75);  \r\n                    this.maxHealth2 = 100;\r\n                    this.currentHealth2 = 100;      \r\n                }\r\n            }\r\n            if(this.node.name === 'boss002'){\r\n                this.scheduleOnce(() => {this.bulletCont2.push(otherCollider)});\r\n                this.currentHealth2 -= 1;\r\n                if (this.currentHealth2 <= 0) {\r\n                    this.currentHealth2 = 0;\r\n                }\r\n                GameCtrl.instance.healthBar.progress = this.currentHealth2 / this.maxHealth2;\r\n                if(this.bulletCont2.length >= 100){\r\n                    this.scheduleOnce(() => {GameCtrl.instance.countPoint(1000)});\r\n                    GameCtrl.instance.healthBar.node.active = false;  \r\n                    this.scheduleOnce(() => {selfCollider.node.destroy()});\r\n                    this.maxHealth3 = 150;\r\n                    this.currentHealth3 = 150;\r\n                    GameCtrl.instance.schedule(GameCtrl.instance.spawnTurn3, 7, 9, 0);\r\n                    GameCtrl.instance.scheduleOnce(()=> {GameCtrl.instance.spawnBoss3()}, 75);\r\n                }\r\n            }\r\n            if(this.node.name === 'boss003'){\r\n                this.scheduleOnce(() => {this.bulletCont3.push(otherCollider)});\r\n                this.currentHealth3 -= 1;\r\n                if (this.currentHealth3 <= 0) {\r\n                    this.currentHealth3 = 0;\r\n                }\r\n                GameCtrl.instance.healthBar.progress = this.currentHealth3 / this.maxHealth3;\r\n                if(this.bulletCont3.length >= 150){\r\n                    this.scheduleOnce(() => {GameCtrl.instance.countPoint(1000)});\r\n                    GameCtrl.instance.healthBar.node.active = false;  \r\n                    this.scheduleOnce(() => {selfCollider.node.destroy()});\r\n                    this.maxHealth1 = 50;\r\n                    this.currentHealth1 = 50;\r\n                    GameCtrl.instance.schedule(GameCtrl.instance.spawnTurn1, 7, 9, 0);\r\n                    GameCtrl.instance.scheduleOnce(()=> {GameCtrl.instance.spawnBoss1()}, 75);\r\n                }\r\n            }\r\n            if(otherCollider.node.name.startsWith('bullet') || otherCollider.node.name.startsWith('rocket')){\r\n                this.scheduleOnce(() => {otherCollider.node?.destroy()});\r\n            }\r\n            \r\n        }\r\n    }\r\n    onEndContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null){\r\n\r\n    }\r\n    spawnBullet(){\r\n        if(!ButtonPlayScene.instance.spawnEnabled) return;\r\n        if(this.node.name === 'boss001'){\r\n            for(let i = 0; i < this.bulletVelos.length; i++){\r\n            let enemyPre = this.listBulletB1[0];\r\n            let prefabInstance = instantiate(enemyPre);\r\n            prefabInstance.getComponent(RigidBody2D).linearVelocity = this.bulletVelos[i];\r\n            prefabInstance.parent = this.node.parent;\r\n            prefabInstance.setWorldPosition(this.node.worldPosition);\r\n            }\r\n        }\r\n        if(this.node.name === 'boss002'){\r\n            return;\r\n        }\r\n        if(this.node.name === 'boss003'){\r\n            for( let i = 0; i < this.listBulletB3.length; i++){\r\n                for(let j = 0; j < 5; j++){\r\n                    let enemyPre = this.listBulletB3[i];\r\n                    let prefabInstance = instantiate(enemyPre);\r\n                    prefabInstance.parent = this.node.parent;\r\n    \r\n                    if(enemyPre.name.endsWith('_0') || enemyPre.name.endsWith('_1') || enemyPre.name.endsWith('_2') || enemyPre.name.endsWith('_3') || enemyPre.name.endsWith('_4')){\r\n                        prefabInstance.setWorldPosition(this.node.worldPosition.x - 105, this.node.worldPosition.y - 65, this.node.worldPosition.z);\r\n                    }\r\n                    if(enemyPre.name.endsWith('_5') || enemyPre.name.endsWith('_6') || enemyPre.name.endsWith('_7') || enemyPre.name.endsWith('_8') || enemyPre.name.endsWith('_9')){\r\n                        prefabInstance.setWorldPosition(this.node.worldPosition.x + 105, this.node.worldPosition.y - 65, this.node.worldPosition.z);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}